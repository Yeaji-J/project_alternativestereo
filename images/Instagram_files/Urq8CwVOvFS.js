;/*FB_PKG_DELIM*/

__d("AudioClipsTranscriptionButtonClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1004"),s=o("FalcoLoggerInternal").create("audio_clips_transcription_button_click",e),u=s;l.default=u}),98);
__d("AudioClipsTranscriptionCompleteFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1097"),s=o("FalcoLoggerInternal").create("audio_clips_transcription_complete",e),u=s;l.default=u}),98);
__d("AudioClipsTranscriptionExpandClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1098"),s=o("FalcoLoggerInternal").create("audio_clips_transcription_expand_click",e),u=s;l.default=u}),98);
__d("AudioClipsTranscriptionFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1279"),s=o("FalcoLoggerInternal").create("audio_clips_transcription_failure",e),u=s;l.default=u}),98);
__d("TrustedTypesChromecastScriptURLPolicy",["TrustedTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e=["pkedcjkdefgpdelpbcmbmeomcjbeemfm","hfaagokkkhdbgiakmmlclaapfelnkoah","fmfcbgogabcbclcofgocippekhfcmgfj","enhhojjnijigcajfphajepfemndkmdlo"];function s(t){var n=e.join("|"),r=new RegExp("^chrome-extension://(?:null|"+n+")/cast_sender\\.js$");return r.test(t)}var u={createScriptURL:function(t){if(s(t))return t;throw r("err")("Violated policy TrustedTypesChromecastScriptURLPolicy: "+t+" is not a Chromecast extension URI.")}},c=r("TrustedTypes").createPolicy("chromecast-extension-uri",u),d=c;l.default=d}),98);
__d("CastingChromecastAPI",["Promise","TrustedTypesChromecastScriptURLPolicy","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=18e4,u=["pkedcjkdefgpdelpbcmbmeomcjbeemfm","hfaagokkkhdbgiakmmlclaapfelnkoah","fmfcbgogabcbclcofgocippekhfcmgfj","enhhojjnijigcajfphajepfemndkmdlo"],c=null,d=function(r){var t=r.appID,o=r.receiverListener,a=r.sessionListener;return g().then(function(r){var i=new r.ApiConfig(new r.SessionRequest(t),a,o,r.AutoJoinPolicy.ORIGIN_SCOPED,r.DefaultActionPolicy.CAST_THIS_TAB);return new(e||(e=n("Promise")))(function(e,t){r.initialize(i,e,t)})})},m=function(t){return g().then(function(e){e.addReceiverActionListener(function(n,r){switch(r){case e.ReceiverAction.CAST:t.onCast(n);break;case e.ReceiverAction.STOP:t.onStop();break}})})},p=function(r){return g().then(function(t){var o=new t.SessionRequest(r,[t.Capability.VIDEO_OUT,t.Capability.AUDIO_OUT],s);return new(e||(e=n("Promise")))(function(e,n){t.requestSession(e,n,o)})})},_=function(t){return g().then(function(e){return t===e.ReceiverAvailability.AVAILABLE})},f=function(){return g().then(function(e){return e.media.DEFAULT_MEDIA_RECEIVER_APP_ID})},g=function(){return c||(t.chrome?t.chrome.cast&&t.chrome.cast.isAvailable?(c=(e||(e=n("Promise"))).resolve(t.chrome.cast),c):(c=(e||(e=n("Promise"))).resolve().then(function(){return h()}).then(function(o){return new(e||(e=n("Promise")))(function(e,n){t.chrome.cast=t.chrome.cast||{},t.chrome.cast.extensionId=o,t.__onGCastApiAvailable=function(r,o){o?n(o):e(t.chrome.cast)};var a=document.createElement("script");if(a.onerror=n,o==null){n({code:"extension_not_available",description:null,details:null});return}else a.src=r("TrustedTypesChromecastScriptURLPolicy").createScriptURL(b(o));var i=document.head||document.documentElement;if(i==null){n({code:"extension_no_casting_script",description:null,details:null});return}i.appendChild(a)})}),c):(c=(e||(e=n("Promise"))).reject({code:"not_supported",description:null,details:null}),c))};function h(){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var e=0;e<u.length;e++){var t=u[e],n=yield C(t);if(n)return t}return null}),y.apply(this,arguments)}function C(t){return new(e||(e=n("Promise")))(function(e,n){var r=b(t),o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===4&&e(o.status===200)},o.onerror=function(){e(!1)},o.open("GET",r,!0),o.send()})}function b(e){return"chrome-extension://"+e+"/cast_sender.js"}var v={addReceiverListener:m,getDefaultAppID:f,getIsAvailable:_,getSession:p,initialize:d},S=v;l.default=S}),98);
__d("CastingChromecastAPIWrapper",["cr:1885117"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:1885117")}),98);
__d("CastingChromecastSession",["FBLogger","Promise","err","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t,n){var o=this;this.$3=null,this.$4=[],this.$5=[],this.$6=[],this.$7=[],this.$8=[],this.$9=[],this.$10=[],this.$11=[],this.$12=function(e,t){if(e===o.$2){var n=o.$4.slice();n.forEach(function(e){e(t)})}else o.$6.slice().forEach(function(t){t(r("err")("Namespace does not match. Expected "+o.$2+" but received "+e),"CastingChromecastSession._onMessageReceived")})},this.$1=e,this.$2=t,this.$3=n,n.addMessageListener(this.$2,this.$12)}var o=t.prototype;return o.destroy=function(){var e=this.$3;e!=null&&(e.status!=null&&e.status!=="disconnected"&&r("FBLogger")("comet_cast_sender").mustfix("Destroying receiver session that is not disconnected. Status, %s",e.status),e.removeMessageListener(this.$2,this.$12)),this.$3=null},o.isCasting=function(){return this.$3!=null},o.isConnected=function(){return this.$3!=null&&this.$3.status==="connected"},o.isDisconnected=function(){return this.$3!=null&&this.$3.status==="disconnected"},o.disconnect=function(){var t=this;return this.$5.slice().forEach(function(e){e()}),new(e||(e=n("Promise")))(function(e,n){t.$3!=null?t.$3.stop(e,n):e()}).catch(function(e){if(t.$3!=null&&t.$3.status!=="stopped")throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession.disconnect")}),e}).finally(function(){var e=t.$3;t.$3=null,e&&e.removeMessageListener(t.$2,t.$12),t.$7.slice().forEach(function(e){e()})})},o.getVolume=function(){var e=this.$13();return e?e.level:null},o.getFriendlyName=function(){return this.$14()},o.setVolume=function(o){var t=this,a=this.$3;return new(e||(e=n("Promise")))(function(e,t){if(a==null){t(r("err")("Cannot set volume without a session"));return}a.setReceiverVolumeLevel(o,e,t)}).catch(function(e){throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession.setVolume")}),e})},o.isMuted=function(){var e=this.$13();return e?e.muted:null},o.mute=function(){return this.$15(!0)},o.unmute=function(){return this.$15(!1)},o.sendMessage=function(o){var t=this;return new(e||(e=n("Promise")))(function(e,n){var a=t.$3;if(a==null){n(r("err")("The message can not be sent without a session"));return}a.sendMessage(t.$2,o,e,n)}).catch(function(e){throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession.sendMessage")}),e})},o.$13=function(){var e,t=(e=this.$3)==null||(e=e.receiver)==null?void 0:e.volume;return t==null?null:t},o.$14=function(){var e;return((e=this.$3)==null?void 0:e.receiver.friendlyName)||null},o.$15=function(o){var t=this;return new(e||(e=n("Promise")))(function(e,n){var a=t.$3;if(a==null){n(r("err")("The muted state can not be set without a session"));return}a.setReceiverMuted(o,e,n)}).catch(function(e){throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession._setIsMuted")}),e})},o.onMessage=function(t){var e=this.$4;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onDisconnecting=function(t){var e=this.$5;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onError=function(t){var e=this.$6;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onDisconnected=function(t){var e=this.$7;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoLoading=function(t){var e=this.$8;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoLoaded=function(t){var e=this.$9;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoPlaying=function(t){var e=this.$10;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoPaused=function(t){var e=this.$11;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},t})();l.default=s}),98);
__d("CastingErrorUtils",["ErrorMetadata","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return e!=null&&typeof e=="object"&&typeof e.code=="string"&&e.code===t}function s(e){return e!=null&&typeof e=="object"&&typeof e.code=="string"?r("err")("Chromecast error: %s, keys: %s","cast.ChromecastError",JSON.stringify({code:e.code})):r("getErrorSafe")(e)}function u(e,t){e.metadata==null&&(e.metadata=new(r("ErrorMetadata")));var n=e.metadata,o=t==null?void 0:t.videoID;return o!=null&&n.addEntries(["COMET_VIDEO","VIDEO_ID",o]),e}l.isChromecastError=e,l.getCastingErrorSafe=s,l.appendCastingMetadataToExpandedError=u}),98);
__d("ConnectedTvLoggingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1843753"),s=o("FalcoLoggerInternal").create("connected_tv_logging",e),u=s;l.default=u}),98);
__d("CastingChromecastScanner",["CastingChromecastAPIWrapper","CastingChromecastSession","CastingErrorUtils","ConnectedTvLoggingFalcoEvent","Promise","err","performanceAbsoluteNow","promiseDone","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e,t){this.$6=null,this.$7=[],this.$8=[],this.$9=[],this.$10=[],this.$11=[],this.$12=[],this.$13=[],this.$14=[],this.$15=[],this.$1=e,this.$2=t,this.$4=!1,this.$3=!1,this.$5=new Set}var a=t.prototype;return a.init=function(){return this.$6!=null?(s||(s=n("Promise"))).reject(r("err")("Scanner can only be initialized once.")):(this.$6=this.$16(),this.$6)},a.ready=function(){return this.$6==null?(s||(s=n("Promise"))).reject(r("err")("Scanner should be initialized.")):this.$6},a.hasSupport=function(){return this.$3},a.hasFoundReceiver=function(){return this.$4},a.getSession=function(){var e=this;return this.$4?(this.$13.slice().forEach(function(e){e()}),this.$17().then(function(t){var n=e.$18(t);return e.$5.add(n),e.$14.slice().forEach(function(e){e(n)}),n}).catch(function(t){throw e.$10.slice().forEach(function(e){e()}),e.$11.slice().forEach(function(e){e()}),t})):(s||(s=n("Promise"))).reject(r("err")("No receivers found"))},a.$16=function(){var e=this;return this.$3=!0,this.$19().then(function(t){return e.$20()}).then(function(t){e.$9.slice().forEach(function(e){e()})}).then(function(t){return e.$21()}).catch(function(t){throw!o("CastingErrorUtils").isChromecastError(t,"not_supported")&&!o("CastingErrorUtils").isChromecastError(t,"extension_not_available")&&!o("CastingErrorUtils").isChromecastError(t,"extension_no_casting_script")&&e.$8.slice().forEach(function(e){e(t,"CastingChromecastScanner._init")}),t})},a.$21=function(){var e=this,t=this.$1;if(t==null)return(s||(s=n("Promise"))).reject(r("err")("App ID is not defined"));var o=function(n){var t=e.$18(n);e.$14.slice().forEach(function(e){e(t)})},a=function(n){r("promiseDone")(r("CastingChromecastAPIWrapper").getIsAvailable(n).then(function(t){e.$4=t,e.$15.slice().forEach(function(t){t({foundReceiver:e.$4})})}))};return r("CastingChromecastAPIWrapper").initialize({appID:t,receiverListener:a,sessionListener:o}).then(function(){}).catch(function(t){throw e.$8.slice().forEach(function(e){e(t,"CastingChromecastScanner._initializeApi")}),t})},a.$19=function(){var e=this;return this.$1!=null?(s||(s=n("Promise"))).resolve():r("CastingChromecastAPIWrapper").getDefaultAppID().then(function(t){e.$1=t})},a.$17=function(){var t=this.$1;if(t==null)return(s||(s=n("Promise"))).reject(r("err")("App ID is not defined"));var o=(e||(e=r("performanceAbsoluteNow")))();return r("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_requested"}}),r("CastingChromecastAPIWrapper").getSession(t).then(function(t){return r("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_started",perf_time_ms:Math.floor((e||(e=r("performanceAbsoluteNow")))()-o)}}),t}).catch(function(t){throw r("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_failed",perf_time_ms:Math.floor((e||(e=r("performanceAbsoluteNow")))()-o),session_failure_code:typeof t.code=="string"?t.code:null,session_failure_description:t.description}}),t})},a.$18=function(t){var e=this,n=new(r("CastingChromecastSession"))(this.$1||"",this.$2||"",t),o=n.onDisconnecting(function(){e.$12.slice().forEach(function(e){e()})}),a=n.onError(function(t,n){e.$8.slice().forEach(function(e){e(t,n)})}),i=n.onDisconnected(function(){e.$11.slice().forEach(function(e){e()}),e.$5.delete(n),o.remove(),a.remove(),i.remove()});return n},a.$20=function(){var e=this;return r("CastingChromecastAPIWrapper").addReceiverListener({onCast:function(n){e.$7.slice().forEach(function(e){e(n)})},onStop:function(){e.$5.forEach(function(e){return e.disconnect()})}})},a.onCast=function(t){var e=this.$7;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onError=function(t){var e=this.$8;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onInit=function(t){var e=this.$9;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionCancelled=function(t){var e=this.$10;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionDisconnected=function(t){var e=this.$11;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionDisconnecting=function(t){var e=this.$12;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionRequested=function(t){var e=this.$13;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionStarted=function(t){var e=this.$14;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onStatusChanged=function(t){var e=this.$15;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},t})();l.default=u}),98);
__d("CastingState",[],(function(t,n,r,o,a,i){"use strict";function e(){return{isCastPending:!1,receiverExperience:null,receiverFriendlyName:null,receiverIsConnected:!1,receiverIsMuted:null,receiverVolume:null}}function l(){return{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null,type:"video_channel"}}function s(){return{type:"photo"}}function u(){return{currentAssetID:null,currentPlaybackState:null,type:"photo_album"}}i.initialCastingState=e,i.initialVideoChannelExperienceState=l,i.initialPhotoExperienceState=s,i.initialPhotoAlbumExperienceState=u}),66);
__d("TV2PhotoAlbumReportedState",[],(function(t,n,r,o,a,i){"use strict";function e(e){return m(JSON.parse(e),y("TV2PhotoAlbumReportedState"))}function l(e){return JSON.stringify(p(e,y("TV2PhotoAlbumReportedState")),null,2)}function s(e,t,n){throw n===void 0&&(n=""),Error(n?'Invalid value for key "'+n+'". Expected type '+JSON.stringify(e)+" but got "+JSON.stringify(t):"Invalid value "+JSON.stringify(t)+" for type "+JSON.stringify(e))}function u(e){if(e.jsonToJS===void 0){var t={};e.props.forEach(function(e){return t[e.json]={key:e.js,typ:e.typ}}),e.jsonToJS=t}return e.jsonToJS}function c(e){if(e.jsToJSON===void 0){var t={};e.props.forEach(function(e){return t[e.js]={key:e.json,typ:e.typ}}),e.jsToJSON=t}return e.jsToJSON}function d(e,t,n,r){r===void 0&&(r="");function o(e,t){return typeof e==typeof t?t:s(e,t,r)}function a(e,t){for(var r=e.length,o=0;o<r;o++){var a=e[o];try{return d(t,a,n)}catch(e){}}return s(e,t)}function i(e,t){return e.indexOf(t)!==-1?t:s(e,t)}function l(e,t){return Array.isArray(t)?t.map(function(t){return d(t,e,n)}):s("array",t)}function u(e){if(e===null)return null;var t=new Date(e);return isNaN(t.valueOf())?s("Date",e):t}function c(e,t,r){if(r===null||typeof r!="object"||Array.isArray(r))return s("object",r);var o={};return Object.getOwnPropertyNames(e).forEach(function(t){var a=e[t],i=Object.prototype.hasOwnProperty.call(r,t)?r[t]:void 0;o[a.key]=d(i,a.typ,n,a.key)}),Object.getOwnPropertyNames(r).forEach(function(a){Object.prototype.hasOwnProperty.call(e,a)||(o[a]=d(r[a],t,n,a))}),o}if(t==="any")return e;if(t===null)return e===null?e:s(t,e);if(t===!1)return s(t,e);for(;typeof t=="object"&&t.ref!==void 0;)t=C[t.ref];return Array.isArray(t)?i(t,e):typeof t=="object"?Object.prototype.hasOwnProperty.call(t,"unionMembers")?a(t.unionMembers,e):Object.prototype.hasOwnProperty.call(t,"arrayItems")?l(t.arrayItems,e):Object.prototype.hasOwnProperty.call(t,"props")?c(n(t),t.additional,e):s(t,e):t===Date&&typeof e!="number"?u(e):o(t,e)}function m(e,t){return d(e,t,u)}function p(e,t){return d(e,t,c)}function _(e){return{arrayItems:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{unionMembers:t}}function g(e,t){return{props:e,additional:t}}function h(e){return{props:[],additional:e}}function y(e){return{ref:e}}var C={TV2PhotoAlbumReportedState:g([{json:"media_parameters",js:"media_parameters",typ:y("MediaParameters")},{json:"media_state",js:"media_state",typ:y("MediaState")}],"any"),MediaParameters:g([{json:"album_id",js:"album_id",typ:""}],"any"),MediaState:g([{json:"photo_state",js:"photo_state",typ:f(void 0,y("PhotoMediaState"))},{json:"video_state",js:"video_state",typ:f(void 0,y("VideoMediaState"))}],"any"),PhotoMediaState:g([{json:"duration_ms",js:"duration_ms",typ:3.14},{json:"photo_id",js:"photo_id",typ:""},{json:"photo_playback_state",js:"photo_playback_state",typ:y("PhotoPlaybackState")},{json:"position_ms",js:"position_ms",typ:3.14}],"any"),VideoMediaState:g([{json:"duration_ms",js:"duration_ms",typ:3.14},{json:"position_ms",js:"position_ms",typ:3.14},{json:"video_id",js:"video_id",typ:""},{json:"video_playback_state",js:"video_playback_state",typ:y("VideoPlaybackState")}],"any"),PhotoPlaybackState:["paused","play"],VideoPlaybackState:["ended","paused","play","seeking","unknown"]};a.exports={TV2PhotoAlbumReportedStateToJson:l,toTV2PhotoAlbumReportedState:e}}),null);
__d("TV2UniqueIDs",["guid"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(t){var n,r=(n=e.get(t))!=null?n:0;return e.set(t,r+1),""+t+r.toString(36)}function u(){return s("id_tv2_vcr_")}function c(){return s("id_tv2_veqe_")}function d(){return s("id_tv2_toast_")}function m(){return s("id_tv2_rvr_")}function p(){return r("guid")()}l.makeTV2VideoCastRequestID=u,l.makeTV2VideoExperienceQueueEntryID=c,l.makeTV2ToastID=d,l.makeTV2RelatedVideosRequestID=m,l.makeTV2ChainingSessionID=p}),98);
__d("getTV2QueryStringCheatcodeValue",[],(function(t,n,r,o,a,i){"use strict";function e(e){try{var n=new RegExp("\\b"+e+"=([^&]*)"),r=n.exec(t.location.search);return!r||r[1]==null?null:r[1]}catch(e){return null}}i.default=e}),66);
__d("getTV2QueryStringCheatcode",["getTV2QueryStringCheatcodeValue"],(function(t,n,r,o,a,i,l){"use strict";function e(e){try{return r("getTV2QueryStringCheatcodeValue")(e)==="1"}catch(e){return!1}}l.default=e}),98);
__d("getTV2DebuggingEnabled",["getTV2QueryStringCheatcode"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("getTV2QueryStringCheatcode")("debugging")}l.default=e}),98);
__d("TV2CommsParseUtils",["TV2PhotoAlbumReportedState","TV2UniqueIDs","err","getErrorSafe","getTV2DebuggingEnabled"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e===null?"null":e===""?"empty string":Array.isArray(e)?"array":typeof e=="object"?"object with keys: "+JSON.stringify(Object.keys(e).sort()):typeof e}function s(t,n,o){if(typeof t!="string"||t===""){var a=r("err")("Message parse error: %s expected JSON string, got %s",o,e(t));throw a}var i;try{return i=JSON.parse(t),n(i,o)}catch(e){if(typeof e=="object"&&e!=null&&"messageFormat"in e&&typeof e.messageFormat=="string"&&"messageParams"in e&&Array.isArray(e.messageParams))throw e;var l=r("getErrorSafe")(e),s=r("err")("Message parse error: %s expected JSON string, got error: %s",o,l.message);throw s}}function u(t,n){if(typeof t!="object"||t==null){var o=r("err")("Message parse error: %s expected object, got %s",n,e(t));throw o}return t}function c(t,n){if(t==null)return null;if(typeof t!="object"||t==null){var o=r("err")("Message parse error: %s expected object, got %s",n,e(t));throw o}return t}function d(t,n){if(!Array.isArray(t)){var o=r("err")("Message parse error: %s expected array, got %s",n,e(t));throw o}return t}function m(t,n){if(!Array.isArray(t)){var o=r("err")("Message parse error: %s expected array, got %s",n,e(t));throw o}return t.map(function(e){return _(e,n)})}function p(t,n){if(!Array.isArray(t)){var o=r("err")("Message parse error: %s expected array, got %s",n,e(t));throw o}return t.filter(Boolean).map(function(e){return _(e,n)})}function _(t,n){if(typeof t!="string"||t===""){var o=r("err")("Message parse error: %s expected non-empty string, got %s",n,e(t));throw o}return t}function f(t,n){if(t==null)return null;if(typeof t!="string"||t===""){var o=r("err")("Message parse error: %s expected optional non-empty string, got %s",n,e(t));throw o}return t}function g(t,n){if(t==null)return null;if(typeof t!="string"){var o=r("err")("Message parse error: %s expected optional string, got %s",n,e(t));throw o}return t}function h(t,n){if(t==null)return null;if(!(typeof t=="number"&&Number.isFinite(t)||typeof t=="string"&&t!=="")){var o=r("err")("Message parse error: %s expected optional non-empty string or number, got %s",n,e(t));throw o}return t}function y(t,n){if(typeof t!="number"||!Number.isFinite(t)){var o=r("err")("Message parse error: %s expected finite number, got %s",n,e(t));throw o}return t}function C(t,n){if(t==null)return null;if(typeof t!="number"||!Number.isFinite(t)){var o=r("err")("Message parse error: %s expected optional finite number, got %s",n,e(t));throw o}return t}function b(e,t){return e==="true"||e===!0}function v(e,t,n){return n===void 0&&(n=!1),e==null?n:e===!0}function S(t,n){if(typeof t!="boolean"){var o=r("err")("Parse error: %s expected boolean, got %s",n,e(t));throw o}return t}function R(e,t){var n=e!=null?u(e,t):null;if(n==null)return null;var r=_(n.uri,t+".uri"),o=y(n.width,t+".width"),a=y(n.height,t+".height");return{height:a,uri:r,width:o}}function L(e,t){var n=e!=null?u(e,t):null;if(n==null)return null;var r=u(n.image,t+".image"),o=_(r.uri,t+".image.uri");return{uri:o}}function E(e,t){if(e==null)return null;var n=d(e,t);return n.map(function(e,t){return _(e,"["+t+"]")})}function k(e,t){return s(e,function(e,t){var n=d(e,t);return n.map(function(e,n){var r=t+"."+n;return T(u(e,r),r)})},t)}function I(e,t){return s(e,function(e,t){return T(u(e,t),t)},t)}function T(e,n){var a=_(e.access_token,n+".access_token"),i=String(h(e.app_id,n+".app_id")),l=g(e.app_version,n+".app_version"),s=R(e.background_image,n+".background_image"),u=f(e.channel_token,n+".channel_token"),c=f(e.channel_session_id,n+".channel_session_id"),d=g(e.end_cursor,n+".end_cursor")||null,m=v(e.from_next_video_query,n+".from_next_video_query"),y=v(e.is_ad,n+".is_ad"),C=E(e.dash_prefetched_representation_ids,n+".dash_prefetched_representation_ids"),b=f(e.entry_point,n+".entry_point"),S=f(e.player_origin===""?null:e.player_origin,n+".player_origin"),k=f(e.player_suborigin===""?null:e.player_suborigin,n+".player_suborigin"),I=L(e.preferred_thumbnail,n+".preferred_thumbnail"),T=f(e.video_channel_id,n+".video_channel_id"),D=_(e.root_video_id,n+".root_video_id"),x=r("getTV2DebuggingEnabled")()?/\bvideo_id=([0-9]+)\b/.exec(t.location.search):null,$=x&&x[1]?x[1]:_(e.video_id,n+".video_id"),P=e.tracking_codes!=null?p(e.tracking_codes,n+".tracking_codes"):null;return{accessToken:a,appID:i,appVersion:l,backgroundImage:s,chainingEnabled:!1,channelSessionID:c,channelToken:u,dashPrefetchedRepresentationIDs:C,endCursor:d,entryPoint:b,fromNextVideoQuery:m,isAd:y,playerOrigin:S,playerSuborigin:k,preferredThumbnail:I,rootVideoID:D,startTimestamp:0,trackingCodes:P,videoCastRequestID:o("TV2UniqueIDs").makeTV2VideoCastRequestID(),videoChannelID:T,videoID:$}}function D(t,n){var o=u(t,n),a=_(o.type,n+".type");switch(a){case"version_response":return o;case"version_launch_response":return o;case"experience_state":return o;case"command_result":return o;case"duration_change":return o;case"status_update":return o;case"experience_status_update":return o}var i=r("err")("Parse error: %s expected response message type, got %s","parseTV2CommsFBAppOutboundMessageFromObject",e(o));throw i}function x(e){return s(e,D,".")}function $(t){var n=x(t);switch(n.type){case"version_response":case"version_launch_response":case"experience_state":case"command_result":return n}var o=r("err")("Parse error: %s expected response message type, got %s","parseCastingReceiverResponseMessageFromJSON",e(n));throw o}function P(e){return o("TV2PhotoAlbumReportedState").toTV2PhotoAlbumReportedState(e)}l.parseJSONString=s,l.parseObject=u,l.parseOptionalObject=c,l.parseArray=d,l.parseStringArray=m,l.parseTrackingCodes=p,l.parseNonEmptyString=_,l.parseOptionalNonEmptyString=f,l.parseOptionalString=g,l.parseNumber=y,l.parseOptionalNumber=C,l.parseOptionalStringishBoolean=b,l.parseOptionalBoolean=v,l.parseBoolean=S,l.parseVideoCastingPayloadBackgroundImage=R,l.parseVideoCastingPayloadPreferredThumbnail=L,l.parseVideoCastingPayloadListJSONAsTV2VideoCastRequestArray=k,l.parseVideoCastingPayloadJSONAsTV2VideoCastRequest=I,l.parseVideoCastingPayloadAsTV2VideoCastRequest=T,l.parseTV2CommsFBAppOutboundMessageFromJSON=x,l.parseCastingReceiverResponseMessageFromJSON=$,l.parseCastingReceiverPhotoAlbumReportedState=P}),98);
__d("fetchCtvCastPayloadQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29808457688745543"}),null);
__d("fetchCtvCastPayloadQuery.graphql",["fetchCtvCastPayloadQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"castSessionID"},t={defaultValue:null,kind:"LocalArgument",name:"mediaParameters"},r={defaultValue:null,kind:"LocalArgument",name:"requestID"},o=[{alias:null,args:[{kind:"Variable",name:"cast_session_id",variableName:"castSessionID"},{kind:"Literal",name:"caster_id",value:0},{kind:"Variable",name:"media_parameters_json",variableName:"mediaParameters"},{kind:"Literal",name:"receiver_app_id",value:0x5bc08d3f803b9},{kind:"Variable",name:"request_id",variableName:"requestID"},{kind:"Literal",name:"uses_secure_connection",value:!0}],kind:"ScalarField",name:"ctv_cast_payload",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,r],kind:"Fragment",metadata:null,name:"fetchCtvCastPayloadQuery",selections:o,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,r,t],kind:"Operation",name:"fetchCtvCastPayloadQuery",selections:o},params:{id:n("fetchCtvCastPayloadQuery_facebookRelayOperation"),metadata:{},name:"fetchCtvCastPayloadQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("fetchCtvCastPayload",["CometRelay","err","fetchCtvCastPayloadQuery.graphql","getErrorSafe","guid"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("fetchCtvCastPayloadQuery.graphql");function u(e){var t=e.castSessionID,n=e.environment;return o("CometRelay").fetchQuery(n,s,{castSessionID:t,mediaParameters:"{}",requestID:r("guid")()}).toPromise().then(function(e){return e!=null&&e.ctv_cast_payload!=null&&typeof e.ctv_cast_payload=="string"?{payload:e.ctv_cast_payload,type:"loaded"}:{error:r("err")("Payload was not string"),type:"error"}}).catch(function(e){var t=r("getErrorSafe")(e);return{error:t,type:"error"}})}function c(e){var t=e.albumID,n=e.castSessionID,a=e.environment;return o("CometRelay").fetchQuery(a,s,{castSessionID:n,mediaParameters:JSON.stringify({album_id:t}),requestID:r("guid")()}).toPromise().then(function(e){return typeof(e==null?void 0:e.ctv_cast_payload)=="string"?{payload:e.ctv_cast_payload,type:"loaded"}:{error:r("err")("Payload was not string"),type:"error"}}).catch(function(e){var t=r("getErrorSafe")(e);return{error:t,type:"error"}})}l.fetchPhotoCastPayload=u,l.fetchAlbumCastPayload=c}),98);
__d("fetchVideoCastPayloadQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9544699068932467"}),null);
__d("fetchVideoCastPayloadQuery.graphql",["fetchVideoCastPayloadQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"castSessionID"},t={defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},r={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},o={defaultValue:null,kind:"LocalArgument",name:"videoID"},a=[{kind:"Variable",name:"id",variableName:"videoID"}],i={alias:null,args:[{kind:"Variable",name:"cast_session_id",variableName:"castSessionID"},{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSubOrigin"}],kind:"ScalarField",name:"video_cast_payload",storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o],kind:"Fragment",metadata:null,name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:a,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[i],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[o,t,r,e],kind:"Operation",name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:a,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("fetchVideoCastPayloadQuery_facebookRelayOperation"),metadata:{},name:"fetchVideoCastPayloadQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("fetchVideoCastPayload",["CometRelay","Promise","err","fetchVideoCastPayloadQuery.graphql","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e!==void 0?e:e=n("fetchVideoCastPayloadQuery.graphql");function c(e){var t=e.castSessionID,a=e.environment,i=e.playerOrigin,l=e.playerSubOrigin,c=e.videoID;return r("gkx")("20113")?(s||(s=n("Promise"))).resolve({type:"video_cannot_be_casted"}):o("CometRelay").fetchQuery(a,u,{castSessionID:t,playerOrigin:i,playerSubOrigin:l,videoID:c}).toPromise().then(function(e){return e==null||e.video==null||e.video.video_cast_payload==null?{type:"video_cannot_be_casted"}:typeof e.video.video_cast_payload=="string"?{payload:e.video.video_cast_payload,type:"loaded"}:{error:r("err")("Payload was not string"),type:"error"}}).catch(function(e){var t=r("getErrorSafe")(e);return{error:t,type:"error"}})}l.default=c}),98);
__d("CastingController",["CastingErrorUtils","CastingState","FBLogger","Promise","SubscriptionsHandler","TV2CommsParseUtils","err","fetchCtvCastPayload","fetchVideoCastPayload","getErrorSafe","performanceAbsoluteNow","promiseDone","removeFromArray","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="PhotoAlbum",c="ChannelVideo",d="Photo",m=(function(){function t(e,t){var n=this;this.$5=[],this.$6=[],this.$7=[],this.$9=function(){var e=o("CastingState").initialCastingState();n.$12(e),n.$13(null)},this.$10=function(e){switch(e.type){case"status_update":n.$16(e);break;case"experience_status_update":n.$17(e);break;default:break}},this.$11=function(e,t){var a;if(o("CastingErrorUtils").isChromecastError(e,"cancel"))r("FBLogger")("fbtv").warn("ChromecastError while casting. Received ChromecastError with cancel code.");else if(((a=n.$2)==null?void 0:a.type)==="video_channel"){var i,l=(i=n.$2)==null?void 0:i.currentVideoID,s=o("CastingErrorUtils").appendCastingMetadataToExpandedError(o("CastingErrorUtils").getCastingErrorSafe(e),babelHelpers.extends({},l!=null?{videoID:l}:{}));r("FBLogger")("comet_cast_sender").catching(s).mustfix("Receiver error at %s while playing video channel",t),r("promiseDone")(n.$4.stopCasting())}else{var u,c=o("CastingErrorUtils").appendCastingMetadataToExpandedError(o("CastingErrorUtils").getCastingErrorSafe(e),{}),d=((u=n.$2)==null?void 0:u.type)||"";r("FBLogger")("comet_cast_sender").catching(c).mustfix("Receiver error at %s while playing in experience %s",t,d),r("promiseDone")(n.$4.stopCasting())}},this.$1=o("CastingState").initialCastingState(),this.$2=null,this.$3=t,this.$4=e,this.$8=new(r("SubscriptionsHandler")),this.$8.addSubscriptions(this.$4.onReceiverDisconnected(this.$9),this.$4.onSessionDisconnected(this.$9),this.$4.onSessionMessage(this.$10),this.$4.onError(this.$11))}var a=t.prototype;return a.destroy=function(){this.$8.release()},a.getCastingState=function(){return this.$1},a.getCastingExperienceState=function(){return this.$2},a.setCastingState=function(t){this.$1=t},a.setCastingExperienceState=function(t){this.$2=t},a.subscribeToCastingStateChange=function(t){var e=this;return this.$5.push(t),function(){r("removeFromArray")(e.$5,t)}},a.subscribeToCastingExperienceStateChange=function(t){var e=this;return this.$6.push(t),function(){r("removeFromArray")(e.$6,t)}},a.subscribeToCastingEvent=function(t){var e=this;return this.$7.push(t),function(){r("removeFromArray")(e.$7,t)}},a.startPlayVideoNow=function(a){var t=this,i=a.environment,l=a.origin,u=a.position,d=a.subOrigin,m=a.videoID;this.$1.isCastPending||(this.$12(babelHelpers.extends({},this.$1,{isCastPending:!0})),this.$13(null),this.$14({data:{type:"cast_requested",videoID:m},timestamp:(s||(s=r("performanceAbsoluteNow")))()}),r("promiseDone")((e||(e=n("Promise"))).all([r("fetchVideoCastPayload")({castSessionID:this.$3,environment:i,playerOrigin:l,playerSubOrigin:d,videoID:m}),this.$4.getSession().then(function(e){return t.$12(babelHelpers.extends({},t.$1,{receiverIsConnected:!0})),e})]).then(function(a){var i=a[0],l=a[1];if(i.type==="video_cannot_be_casted")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("err")("video_cannot_be_casted"),{videoID:m})).mustfix("The video is not eligible to be casted. The cast request is ignored."),(e||(e=n("Promise"))).resolve();if(i.type==="error")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(i.error,{videoID:m})).mustfix("There was a failure retrieving video cast payload. Video failed to play."),(e||(e=n("Promise"))).resolve();var s=t.$4.isCasting(c),d=null;return s?d=t.$4.playVideoNow({position:u},i.payload):d=t.$4.startCasting(c,{position:u},i.payload),d.then(function(){var e=babelHelpers.extends({},t.$1,t.$15());t.$12(e);var n=o("CastingState").initialVideoChannelExperienceState();t.$13(n)})}).catch(function(e){t.$14({data:{type:"cast_failed",videoID:m},timestamp:(s||(s=r("performanceAbsoluteNow")))()}),o("CastingErrorUtils").isChromecastError(e,"cancel")||r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("getErrorSafe")(e),{videoID:m})).mustfix("Failed to cast video.")}).finally(function(){var e=babelHelpers.extends({},t.$1,{isCastPending:!1});t.$12(e)})))},a.startPhotoCasting=function(a){var t=this,i=a.environment;this.$1.isCastPending||(this.$12(babelHelpers.extends({},this.$1,{isCastPending:!0})),this.$13(null),this.$14({data:{type:"photo_cast_requested"},timestamp:(s||(s=r("performanceAbsoluteNow")))()}),r("promiseDone")((e||(e=n("Promise"))).all([o("fetchCtvCastPayload").fetchPhotoCastPayload({castSessionID:this.$3,environment:i}),this.$4.getSession().then(function(e){return t.$12(babelHelpers.extends({},t.$1,{receiverIsConnected:!0})),e})]).then(function(a){var i=a[0],l=a[1];if(i.type==="error")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(i.error,{})).mustfix("There was a failure retrieving photo cast payload."),(e||(e=n("Promise"))).resolve();var s=t.$4.startCasting(d,{},i.payload);return s.then(function(){var e=babelHelpers.extends({},t.$1,t.$15());t.$12(e),t.$13(o("CastingState").initialPhotoExperienceState())})}).catch(function(e){o("CastingErrorUtils").isChromecastError(e,"cancel")||r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("getErrorSafe")(e),{})).mustfix("Failed to start photo casting session.")}).finally(function(){var e=babelHelpers.extends({},t.$1,{isCastPending:!1});t.$12(e)})))},a.startAlbumSlideshow=function(a){var t=this,i=a.albumID,l=a.environment;this.$1.isCastPending||(this.$12(babelHelpers.extends({},this.$1,{isCastPending:!0})),this.$13(null),r("promiseDone")((e||(e=n("Promise"))).all([o("fetchCtvCastPayload").fetchAlbumCastPayload({albumID:i,castSessionID:this.$3,environment:l}),this.$4.getSession().then(function(e){return t.$12(babelHelpers.extends({},t.$1,{receiverIsConnected:!0})),e})]).then(function(a){var i=a[0],l=a[1];if(i.type==="album_cannot_be_casted")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("err")("album_cannot_be_casted"),{})).mustfix("The album is not eligible to be casted."),(e||(e=n("Promise"))).resolve();if(i.type==="error")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(i.error,{})).mustfix("There was a failure retrieving album cast payload."),(e||(e=n("Promise"))).resolve();var s=t.$4.startCasting(u,{},i.payload);return s.then(function(){var e=babelHelpers.extends({},t.$1,t.$15());t.$12(e);var n=o("CastingState").initialPhotoAlbumExperienceState();t.$13(n)})}).catch(function(e){o("CastingErrorUtils").isChromecastError(e,"cancel")||r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("getErrorSafe")(e),{})).mustfix("Failed to cast album.")}).finally(function(){var e=babelHelpers.extends({},t.$1,{isCastPending:!1});t.$12(e)})))},a.disconnect=function(){r("promiseDone")(this.$4.stopCasting())},a.play=function(){r("promiseDone")(this.$4.playVideo())},a.pause=function(){r("promiseDone")(this.$4.pauseVideo())},a.setVolume=function(t){r("promiseDone")(this.$4.setVolume(t))},a.mute=function(){r("promiseDone")(this.$4.mute())},a.unmute=function(){r("promiseDone")(this.$4.unmute())},a.seek=function(t){r("promiseDone")(this.$4.seekVideo(t))},a.showSingleMedia=function(t){var e=null;switch(t.type){case"photo":e={photo_id:t.photoID};break;case"video":e={video_id:t.videoID};break;default:t.type;return}r("promiseDone")(this.$4.showPhoto({media_parameters:e,request_id:r("uuidv4")()}))},a.playAlbumSlideshow=function(){r("promiseDone")(this.$4.playAlbumSlideshow())},a.pauseAlbumSlideshow=function(){r("promiseDone")(this.$4.pauseAlbumSlideshow())},a.nextPhotoAlbumSlideshow=function(){r("promiseDone")(this.$4.nextPhotoAlbumSlideshow())},a.previousPhotoAlbumSlideshow=function(){r("promiseDone")(this.$4.previousPhotoAlbumSlideshow())},a.$12=function(t){t!==this.$1&&(this.$1=t,this.$5.slice().forEach(function(e){e(t)}))},a.$13=function(t){t!==this.$2&&(this.$2=t,this.$6.slice().forEach(function(e){e(t)}))},a.$14=function(t){this.$7.slice().forEach(function(e){e(t)})},a.$16=function(t){var e=this.$1,n=this.$2;if(n!=null&&n.type==="video_channel"){var o=t.data.video_id,a=this.$4.getVolume()||0,i=this.$4.isMuted()||!1;o!=null&&this.$14({data:{playbackState:t.data.state,playerInfo:(t==null?void 0:t.player_info)||null,receiverInfo:(t==null?void 0:t.receiver_info)||null,type:"video_status_update",videoID:o},timestamp:(s||(s=r("performanceAbsoluteNow")))()});var l={receiverIsConnected:!0,receiverIsMuted:i,receiverVolume:a};if(o==null)this.$12(babelHelpers.extends({},e,l)),this.$13(babelHelpers.extends({},n,{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null}));else{var u=babelHelpers.extends({},e,l);this.$12(u),this.$13(babelHelpers.extends({},n,{currentDuration:t.data.duration!=null?t.data.duration:n.currentDuration,currentPlaybackState:t.data.state,currentPosition:t.data.position,currentVideoID:o}))}}},a.$17=function(t){var e=this.$2;if(e!=null&&e.type==="photo_album"&&t.data.name==="PhotoAlbum"){var n,r,a,i=o("TV2CommsParseUtils").parseCastingReceiverPhotoAlbumReportedState(t.data.payload),l=i.media_state,s=((n=(r=l.photo_state)==null?void 0:r.photo_id)!=null?n:(a=l.video_state)==null?void 0:a.video_id)||null,u=this.$18(l);this.$13(babelHelpers.extends({},e,{currentAssetID:s,currentPlaybackState:u}))}},a.$15=function(){return{receiverFriendlyName:this.$4.getFriendlyName()||null,receiverIsMuted:this.$4.isMuted()||null,receiverVolume:this.$4.getVolume()||0}},a.$18=function(t){return t.photo_state!=null?t.photo_state.photo_playback_state==="play"?"play":"paused":t.video_state!=null?["play","seeking"].includes(t.video_state.video_playback_state)?"play":"paused":null},t})();l.default=m}),98);
__d("CastingEventReporter",["ConnectedTvLoggingFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=this;this.$4=function(e){switch(e.data.type){case"cast_requested":t.logWithAvailableContext({event:"cast_requested",video_id_override:e.data.videoID}),t.$5(e);break;case"photo_cast_requested":t.logWithAvailableContext({event:"photo_cast_requested"}),t.$5(e);break;case"cast_failed":t.$5(e);break;case"video_status_update":{t.$6(e.data.receiverInfo,e.data.playerInfo),t.$5(e);break}default:break}},this.$1=null,this.$2=null,this.$3={cast_session_id:e,is_google_cast_bg:null,third_party_app_id:null,tv_os_version:null,tv_player_instance_key:null,tv_player_version:null,tv_session_id:null,tv_web_client_revision:null}}var t=e.prototype;return t.destroy=function(){this.$1!=null&&this.$1(),this.$1=null},t.bindToCastingController=function(t){this.$1=t.subscribeToCastingEvent(this.$4)},t.logWithAvailableContext=function(t){var e=this;r("ConnectedTvLoggingFalcoEvent").log(function(){return babelHelpers.extends({},e.$3,t)})},t.$5=function(t){var e=t.data;switch(e.type){case"cast_requested":this.$2={data:e,timestamp:t.timestamp};break;case"cast_failed":{var n=this.$2;this.logWithAvailableContext({event:"cast_failed",perf_time_ms:Math.floor(n!=null?t.timestamp-n.timestamp:0),video_id_override:e.videoID}),this.$2=null;break}case"video_status_update":{var r=this.$2;if(r==null)break;var o=r.data.videoID;e.videoID===o&&e.playbackState==="play"?(this.logWithAvailableContext({event:"cast_started",perf_time_ms:Math.floor(t.timestamp-r.timestamp)}),this.$2=null):e.videoID!==o&&(this.$2=null);break}}},t.$6=function(t,n){var e=(t==null?void 0:t.third_party_app_id)||null,r=(t==null?void 0:t.cast_receiver_logger_session_id)||null,o=(t==null?void 0:t.is_google_cast_bg)||null,a=(t==null?void 0:t.os_version)||null,i=(t==null?void 0:t.web_client_revision)||null,l=(n==null?void 0:n.player_instance_key)||null,s=(n==null?void 0:n.player_version)||null;this.$3=babelHelpers.extends({},this.$3,{is_google_cast_bg:o,third_party_app_id:e,tv_os_version:a,tv_player_instance_key:l,tv_player_version:s,tv_session_id:r,tv_web_client_revision:i})},e})();l.default=e}),98);
__d("TV2MessageTypes",[],(function(t,n,r,o,a,i){"use strict";var e="urn:x-cast:com.facebook.fb",l="urn:x-cast:com.google.cast.media";i.FBAPP_CAST_PROTOCOL_NAMESPACE=e,i.GOOGLE_CAST_MEDIA_PROTOCOL_NAMESPACE=l}),66);
__d("TV2PhotoShowRequest",[],(function(t,n,r,o,a,i){"use strict";function e(e){return m(JSON.parse(e),y("TV2PhotoShowRequest"))}function l(e){return JSON.stringify(p(e,y("TV2PhotoShowRequest")),null,2)}function s(e,t,n){throw n===void 0&&(n=""),Error(n?'Invalid value for key "'+n+'". Expected type '+JSON.stringify(e)+" but got "+JSON.stringify(t):"Invalid value "+JSON.stringify(t)+" for type "+JSON.stringify(e))}function u(e){if(e.jsonToJS===void 0){var t={};e.props.forEach(function(e){return t[e.json]={key:e.js,typ:e.typ}}),e.jsonToJS=t}return e.jsonToJS}function c(e){if(e.jsToJSON===void 0){var t={};e.props.forEach(function(e){return t[e.js]={key:e.json,typ:e.typ}}),e.jsToJSON=t}return e.jsToJSON}function d(e,t,n,r){r===void 0&&(r="");function o(e,t){return typeof e==typeof t?t:s(e,t,r)}function a(e,t){for(var r=e.length,o=0;o<r;o++){var a=e[o];try{return d(t,a,n)}catch(e){}}return s(e,t)}function i(e,t){return e.indexOf(t)!==-1?t:s(e,t)}function l(e,t){return Array.isArray(t)?t.map(function(t){return d(t,e,n)}):s("array",t)}function u(e){if(e===null)return null;var t=new Date(e);return isNaN(t.valueOf())?s("Date",e):t}function c(e,t,r){if(r===null||typeof r!="object"||Array.isArray(r))return s("object",r);var o={};return Object.getOwnPropertyNames(e).forEach(function(t){var a=e[t],i=Object.prototype.hasOwnProperty.call(r,t)?r[t]:void 0;o[a.key]=d(i,a.typ,n,a.key)}),Object.getOwnPropertyNames(r).forEach(function(a){Object.prototype.hasOwnProperty.call(e,a)||(o[a]=d(r[a],t,n,a))}),o}if(t==="any")return e;if(t===null)return e===null?e:s(t,e);if(t===!1)return s(t,e);for(;typeof t=="object"&&t.ref!==void 0;)t=C[t.ref];return Array.isArray(t)?i(t,e):typeof t=="object"?Object.prototype.hasOwnProperty.call(t,"unionMembers")?a(t.unionMembers,e):Object.prototype.hasOwnProperty.call(t,"arrayItems")?l(t.arrayItems,e):Object.prototype.hasOwnProperty.call(t,"props")?c(n(t),t.additional,e):s(t,e):t===Date&&typeof e!="number"?u(e):o(t,e)}function m(e,t){return d(e,t,u)}function p(e,t){return d(e,t,c)}function _(e){return{arrayItems:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{unionMembers:t}}function g(e,t){return{props:e,additional:t}}function h(e){return{props:[],additional:e}}function y(e){return{ref:e}}var C={TV2PhotoShowRequest:g([{json:"media_parameters",js:"media_parameters",typ:y("MediaParameters")},{json:"request_id",js:"request_id",typ:""}],"any"),MediaParameters:g([{json:"photo_id",js:"photo_id",typ:f(void 0,"")},{json:"video_id",js:"video_id",typ:f(void 0,"")}],"any")};a.exports={TV2PhotoShowRequestToJson:l,toTV2PhotoShowRequest:e}}),null);
__d("CastingReceiverManager",["CastingChromecastScanner","FBLogger","Promise","Random","SubscriptionsHandler","TV2CommsParseUtils","TV2MessageTypes","TV2PhotoShowRequest","getErrorSafe","promiseDone","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";var e,s="1.2.0",u=(function(){function t(e){var t=this;this.$5=null,this.$6=null,this.$10=null,this.$11=[],this.$12=[],this.$13=[],this.$14=[],this.$15=[],this.$16=[],this.$17=[],this.$18=[],this.$19=[],this.$4=new(r("CastingChromecastScanner"))(e,o("TV2MessageTypes").FBAPP_CAST_PROTOCOL_NAMESPACE),this.$2=null,this.$1=!1,this.$3=0,this.$6=null,this.$9=new Map,this.$20=new(r("SubscriptionsHandler")),this.$20.addSubscriptions(this.$4.onStatusChanged(function(e){var n=e.foundReceiver;t.$15.slice().forEach(function(e){e(!!n)})}),this.$4.onSessionDisconnected(function(){t.$21(),t.$14.slice().forEach(function(e){e()})}),this.$4.onSessionStarted(function(e){t.$22(e)}),this.$4.onError(function(e,n){t.$11.slice().forEach(function(t){t(e,n)})})),this.$7=this.$4.init(),r("promiseDone")(this.$7.then(function(){t.$2=!0,t.$1=!0,t.$13.slice().forEach(function(e){e()})},function(e){t.$2=!1,t.$12.slice().forEach(function(t){t(e)})}))}var a=t.prototype;return a.ready=function(){return this.$7},a.hasSupport=function(){return this.$2},a.hasFoundReceiver=function(){return this.$4.hasFoundReceiver()},a.isCasting=function(t){var e=!!this.$5&&this.$5.isCasting();return e&&t!=null&&(e=this.$6!=null&&this.$6.indexOf(t)>=0),e},a.getSession=function(){var e=this;return this.ready().then(function(){var t=e.$5;t!=null&&!t.isConnected()&&e.$21()}).then(function(){return e.$5?e.$5:(e.$8||(e.$8=e.$23()),e.$8)}).catch(function(t){throw e.$11.slice().forEach(function(e){e(t,"CastingReceiverManager.getSession")}),t}).finally(function(){e.$8=null})},a.startCasting=function(t,n,r){var e=this;return this.$24(t,n,r).then(function(t){t.success?e.$6=t.target:e.$6=null})},a.stopCasting=function(){var t=this;return this.isCasting()?this.ready().then(function(){var e=t.$5;return e!=null&&e.isDisconnected()&&t.$21(),t.$5}).then(function(t){return t==null?(e||(e=n("Promise"))).resolve(null):t.disconnect()}).then(function(){t.$21()}):(e||(e=n("Promise"))).resolve()},a.playVideoNow=function(r,o){return this.isCasting()?this.$25("next_video",babelHelpers.extends({},r,{auto_advance:!0}),o).then(function(){}):(e||(e=n("Promise"))).resolve()},a.skipToNextVideo=function(){return this.isCasting()?this.$25("skip_video").then(function(){}):(e||(e=n("Promise"))).resolve()},a.playVideo=function(r){return this.isCasting()?this.$25("play_video",{position:r||0}).then(function(){}):(e||(e=n("Promise"))).resolve()},a.pauseVideo=function(){return this.isCasting()?this.$25("pause_video").then(function(){}):(e||(e=n("Promise"))).resolve()},a.seekVideo=function(r){return this.isCasting()?this.$25("seek_video",{position:r}).then(function(){}):(e||(e=n("Promise"))).resolve()},a.showPhoto=function(r){return this.isCasting()?this.$25("show_photo",void 0,o("TV2PhotoShowRequest").TV2PhotoShowRequestToJson(r),"Photo").then(function(){}):(e||(e=n("Promise"))).resolve()},a.stopVideo=function(){return this.isCasting()?this.$25("stop_video").then(function(){}):(e||(e=n("Promise"))).resolve()},a.playAlbumSlideshow=function(){return this.isCasting()?this.$25("play_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.pauseAlbumSlideshow=function(){return this.isCasting()?this.$25("pause_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.nextPhotoAlbumSlideshow=function(){return this.isCasting()?this.$25("next_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.previousPhotoAlbumSlideshow=function(){return this.isCasting()?this.$25("previous_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.getFriendlyName=function(){return this.$5==null?null:this.$5.getFriendlyName()},a.getVolume=function(){return this.$5==null?null:this.$5.getVolume()},a.setVolume=function(r){return!this.isCasting()||this.$5==null?(e||(e=n("Promise"))).resolve():this.$5.setVolume(r)},a.isMuted=function(){return!this.isCasting()||this.$5==null?null:this.$5.isMuted()},a.mute=function(){return!this.isCasting()||this.$5==null?(e||(e=n("Promise"))).resolve():this.$5.mute()},a.unmute=function(){return!this.isCasting()||this.$5==null?(e||(e=n("Promise"))).resolve():this.$5.unmute()},a.$26=function(){var e=this,t=this.$27();return this.$28(function(e){return{data:{client_cast_session:t,version:s},num:e,target:"version",timestamp:Date.now(),type:"version_request"}}).then(function(t){var n=t.messageNum;return e.$29(function(e){return e.response_num===n})}).then(function(e){if(e.type!=="version_response")throw r("FBLogger")("comet_cast_sender").mustfixThrow('Response message was not a "version_response"');if(e.data==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Version response is missing data");return e.data})},a.$24=function(t,n,o){var e=this,a=this.$27();return this.$28(function(e){return{data:{client_cast_session:a,name:t,params:n,payload:o,version:s},num:e,target:"version_launch",timestamp:Date.now(),type:"version_launch"}}).then(function(t){var n=t.messageNum;return e.$29(function(e){return e.response_num===n})}).then(function(e){if(e.type!=="version_launch_response")throw r("FBLogger")("comet_cast_sender").mustfixThrow('Response message was not a "version_launch_response"');if(e.data==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Version launch response is missing data");return e.data})},a.$30=function(){var t=this;return this.$6!=null?(e||(e=n("Promise"))).resolve(this.$6):this.getSession().then(function(e){return t.$26()}).then(function(e){var n=null;if(typeof e.currently_running_experience=="object"&&(n=e.currently_running_experience),n==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Session has no target");return t.$6=n,t.$6})},a.$27=function(){var e=null;return localStorage&&(e=localStorage.getItem("CastingSessionKey")),e==null&&(e=r("Random").uint32().toString(16),localStorage&&localStorage.setItem("CastingSessionKey",e)),e},a.$28=function(t){var e=this.$3+=2;return this.getSession().then(function(n){if(n==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("The message can not be sent without a session");var o=t(e);return n.sendMessage(o)}).then(function(){return{messageNum:e}})},a.$29=function(a){return this.getSession().then(function(t){if(t==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("The message cannot be received without a session");return new(e||(e=n("Promise")))(function(e,n){var r=t.onMessage(function(t){try{var i=o("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(t);if(i.type==="version_response"||i.type==="version_launch_response"||i.type==="experience_state"||i.type==="command_result"){var l=!a||a(i);l&&(r.remove(),e(i))}}catch(e){r.remove(),n(e)}})})})},a.$25=function(t,n,o,a){var e=this;return this.$30().then(function(r){return e.$28(function(e){return{data:{cmd:t,name:a,params:n,payload:o},num:e,target:r,timestamp:Date.now(),type:"experience_command"}})}).then(function(t){var n=t.messageNum;return e.$29(function(e){return e.response_num===n})}).then(function(e){if(e.type!=="command_result")throw r("FBLogger")("comet_cast_sender").mustfixThrow('Response message was not a "command_result"');return e.data})},a.$23=function(){var e=this;return this.$4.getSession().then(function(t){return e.$5==null&&(e.$5=t),e.$5})},a.$22=function(t){var e=this;this.$5=t;var n="extension";this.$8&&(n="site"),r("promiseDone")(this.$26().then(function(a){var i=a.success;if(i){var l=null;typeof a.currently_running_experience=="object"&&(l=a.currently_running_experience),l!=null&&(e.$6=l),e.$18.slice().forEach(function(r){r(t,{session:t,source:n,success:i,target:e.$6})}),e.$10=t.onMessage(function(t){try{var n=o("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(t);e.$17.slice().forEach(function(e){e(n)})}catch(t){var a=r("getErrorSafe")(t);e.$11.slice().forEach(function(e){e(a,"CastingReceiverManager._onSessionStartedHandler")})}})}}))},a.$21=function(){this.$10!=null&&(this.$10.remove(),this.$10=null);var e=this.$5;e!=null&&e.destroy(),this.$5=null,this.$6=null},a.onError=function(t){var e=this.$11;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onExperienceNotSupported=function(t){var e=this.$12;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onExperienceReady=function(t){var e=this.$13;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onReceiverDisconnected=function(t){var e=this.$14;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onReceiverStatusChanged=function(t){var e=this.$15;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionDisconnected=function(t){var e=this.$16;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionMessage=function(t){var e=this.$17;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionStarted=function(t){var e=this.$18;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onStopView=function(t){var e=this.$19;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},t})();l.default=u}),98);
__d("CastingControllerHooks",["CastingContext","CastingController","CastingEventReporter","CastingReceiverManager","CurrentUser","ExecutionEnvironment","FBLogger","Promise","guid","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useContext,m=c.useEffect,p=c.useState,_=null;function f(){if(_!=null)return _;var e=new(r("CastingReceiverManager"))("AAF8F49E"),t=r("guid")(),n=new(r("CastingController"))(e,t),o=new(r("CastingEventReporter"))(t);return o.bindToCastingController(n),_={castingController:n,castingEventReporter:o,castingReceiverManager:e},_}function g(){var e=h(),t=e.castingReceiverManager;return t}function h(){if((s||(s=r("ExecutionEnvironment"))).canUseDOM&&r("CurrentUser").isLoggedIn())return f();throw new(e||(e=n("Promise")))(function(){})}function y(){var e=h(),t=e.castingController;return t}function C(){var e=g(),t=d(o("CastingContext").SetCastingControllerContext),n=p(!1),r=n[0],a=n[1],i=p(!1),l=i[0],s=i[1];return m(function(){var t=e.onExperienceReady(function(){a(e.hasSupport()||!1)});return a(e.hasSupport()||!1),function(){return t.remove()}},[e]),m(function(){var t=e.onReceiverStatusChanged(function(){s(e.hasFoundReceiver()||!1)});return s(e.hasFoundReceiver()||!1),function(){return t.remove()}},[e]),!(t==null||!r||!l)}function b(){var e=y(),t=d(o("CastingContext").SetCastingControllerContext);if(t==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Casting has to be initialized inside CastingProvider.");m(function(){t(e)},[t,e])}l.useCastingController=y,l.useIsCastAvailable=C,l.useCastingInitializeIfNecessary=b}),98);
__d("CometDismissFBNuxMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9877615415639160"}),null);
__d("CometDismissFBNuxMutation.graphql",["CometDismissFBNuxMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nux_id_input"}],t=[{kind:"Variable",name:"nux_id",variableName:"nux_id_input"}],r={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometDismissFBNuxMutation",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"nux_dismiss",plural:!1,selections:[r],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometDismissFBNuxMutation",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"nux_dismiss",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("CometDismissFBNuxMutation_facebookRelayOperation"),metadata:{},name:"CometDismissFBNuxMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("encodeNUXIDForRelay",[],(function(t,n,r,o,a,i){"use strict";var e="NUX_ID:";function l(t){return typeof t=="string"&&t.startsWith(e)?{nuxID:Number(t.replace(e,"")),relayID:t}:{nuxID:Number(t),relayID:e+t}}i.default=l}),66);
__d("CometDismissFBNuxMutation",["CometDismissFBNuxMutation.graphql","CometRelay","encodeNUXIDForRelay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("CometDismissFBNuxMutation.graphql");function u(e,t,n,a){var i=r("encodeNUXIDForRelay")(t),l=i.nuxID,u=i.relayID;return o("CometRelay").commitMutation(e,{mutation:s,onCompleted:n,onError:a,optimisticResponse:{nux_dismiss:{__typename:"NUX",id:u,should_show:!1}},variables:{nux_id_input:l}})}l.commit=u}),98);
__d("CometLogImpressionFBNuxMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9723864714359536"}),null);
__d("CometLogImpressionFBNuxMutation.graphql",["CometLogImpressionFBNuxMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nux_id"}],t=[{kind:"Variable",name:"nux_id",variableName:"nux_id"}],r={alias:null,args:null,kind:"ScalarField",name:"nux_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometLogImpressionFBNuxMutation",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"log_nux_view",plural:!1,selections:[r],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometLogImpressionFBNuxMutation",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"log_nux_view",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("CometLogImpressionFBNuxMutation_facebookRelayOperation"),metadata:{},name:"CometLogImpressionFBNuxMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29635405182772969"}),null);
__d("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation.graphql",["CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nux_id"}],t=[{kind:"Variable",name:"nux_id",variableName:"nux_id"}],r={alias:null,args:null,kind:"ScalarField",name:"nux_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"log_nux_view_and_increment_view_count",plural:!1,selections:[r],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"log_nux_view_and_increment_view_count",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation_facebookRelayOperation"),metadata:{},name:"CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("CometLogImpressionFBNuxMutation",["CometLogImpressionFBNuxMutation.graphql","CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation.graphql","CometRelay","encodeNUXIDForRelay"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e!==void 0?e:e=n("CometLogImpressionFBNuxMutation.graphql");function c(e,t,n,a){var i=r("encodeNUXIDForRelay")(t),l=i.nuxID;return o("CometRelay").commitMutation(e,{mutation:u,onCompleted:n,onError:a,variables:{nux_id:l}})}var d=s!==void 0?s:s=n("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation.graphql");function m(e,t,n,a){var i=r("encodeNUXIDForRelay")(t),l=i.nuxID;return o("CometRelay").commitMutation(e,{mutation:d,onCompleted:n,onError:a,variables:{nux_id:l}})}l.commit=c,l.commitNuxWithNoImpressionLimit=m}),98);
__d("getPeopleTypeaheadNullStateText",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";function e(){return s._(/*BTDS*/"\uc77c\uce58\ud558\ub294 \uc0ac\ub78c \uc5c6\uc74c")}l.default=e}),226);
__d("CometMediaViewerMentionsTypeaheadEmptyState.react",["FDSText.react","getPeopleTypeaheadNullStateText","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){return s.jsx("div",{className:"x6s0dn4 x78zum5 xc9qbxq xl56j7k",children:s.jsx(r("FDSText.react"),{align:"center",color:"secondary",type:"body2",children:r("getPeopleTypeaheadNullStateText")()})})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("CometMentions.react",["baseTypeaheadFlattenEntries","cometTypeaheadKeyboardNavigationUtils","react","useBaseTypeaheadDataSourceFetch"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","context","dataSource","inputElement","layoutStrategyRenderer","loggingProvider","onAriaChange","onEntriesUpdated","onHighlightEntry","onSelectedEntry","onVisibilityChange","position","queryString","viewStrategyRenderer"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useEffect,p=c.useImperativeHandle,_=c.useRef,f=c.useState;function g(t){var n=t.ref,a=t.context,i=t.dataSource,l=t.inputElement,s=t.layoutStrategyRenderer,c=t.loggingProvider,g=t.onAriaChange,y=t.onEntriesUpdated,C=t.onHighlightEntry,b=t.onSelectedEntry,v=t.onVisibilityChange,S=t.position,R=S===void 0?"above":S,L=t.queryString,E=t.viewStrategyRenderer,k=babelHelpers.objectWithoutPropertiesLoose(t,e),I=_(null),T=f(null),D=T[0],x=T[1],$=_([]),P=f($.current),N=P[0],M=P[1],w=f(!0),A=w[0],F=w[1],O=_(null),B=_(L);m(function(){B.current=L},[L]);var W=d(function(e){C&&C(e),x(e),I.current=e},[C]),q=r("useBaseTypeaheadDataSourceFetch")({dataSource:i,onResolvePayload:d(function(e){var t,n=e.entries;$.current=n,M(n);var o=r("baseTypeaheadFlattenEntries")(n),a=o[0],i=I==null||(t=I.current)==null?void 0:t.key;a!=null&&!o.map(function(e){return e.key}).includes(i)&&W(a),y&&y(n.length>0)},[W,y])}),U=q[0].isLoading,V=q[1],H=A&&(N.length>0||U);m(function(){return H?c.startSession(B.current):c.isSessionActive()&&c.maybeEndSession(B.current,r("baseTypeaheadFlattenEntries")($.current)),v(H),function(){c.isSessionActive()&&c.maybeEndSession(B.current,r("baseTypeaheadFlattenEntries")($.current))}},[v,c,H]),m(function(){F(!0),V({query:L})},[V,L,i]),p(n,function(){return{getViewRef:function(){return O},hasSelection:function(){return h(r("baseTypeaheadFlattenEntries")($.current),D)},moveDown:function(){o("cometTypeaheadKeyboardNavigationUtils").moveDown(r("baseTypeaheadFlattenEntries")($.current),D!=null?D.key:null,W,!1)},moveUp:function(){o("cometTypeaheadKeyboardNavigationUtils").moveUp(r("baseTypeaheadFlattenEntries")($.current),D!=null?D.key:null,W,!1)},select:function(){var e=r("baseTypeaheadFlattenEntries")($.current);b&&D!=null&&h(e,D)&&(c.isSessionActive()&&c.maybeEndSession(L,e,D),b(D))}}},[D,W,b,c,L]);var G=d(function(e){var t=r("baseTypeaheadFlattenEntries")($.current);b&&h(t,e)&&(c.isSessionActive()&&c.maybeEndSession(L,t,e),b(e))},[b,c,L]);return m(function(){if(H===!1)return;function e(e,t){for(var n=e.parentElement;n!=null&&n!==t;)n=n.parentElement;return n===t}var t=function(n){var t=n.target;if(t instanceof HTMLElement){var r=O.current,o=r!==null&&(t===r||e(t,r)),a=l!==null&&(t===l||e(t,l));F(o||a)}};return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}},[l,H]),H?u.jsx(s,{ariaProps:{role:"listbox"},context:a,entries:N,highlightedEntry:D,isLoading:U,onAriaChange:g,onBlur:k.onBlur,onHighlightEntry:W,onPressEntry:G,onPressEntryIn:G,position:R,queryString:L,viewRef:O,viewStrategyRenderer:E}):null}g.displayName=g.name+" [from "+i.id+"]";function h(e,t){if(t==null)return!1;var n=t.key;return e.find(function(e){return e.key===n})!=null}l.default=g}),98);
__d("getCometComposerMentionsSearchForLexical",["Lexical"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e.anchor;if(n.type!=="text")return null;var r=n.getNode();if(t!=null&&!t()||t==null&&!r.isSimpleText())return null;var o=n.offset;return r.getTextContent().slice(0,o)}function s(t,n){return t.getEditorState().read(function(){var t=o("Lexical").$getSelection();return o("Lexical").$isRangeSelection(t)?e(t,n):null})}l.default=s}),98);
__d("useCometMentionsBootstrapForLexical",["Lexical","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e,t){var n=c(!1);u(function(){if(!n.current){var r=e.getRootElement()===document.activeElement;if(r){t(),n.current=!0;return}var a=e.registerCommand(o("Lexical").FOCUS_COMMAND,function(){return t(),n.current=!0,a(),!1},o("Lexical").COMMAND_PRIORITY_LOW);return a}},[t,e,n])}l.default=d}),98);
__d("MentionsSessionEndWithoutClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("445"),s=o("FalcoLoggerInternal").create("mentions_session_end_without_click",e),u=s;l.default=u}),98);
__d("MentionsSessionStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("446"),s=o("FalcoLoggerInternal").create("mentions_session_start",e),u=s;l.default=u}),98);
__d("MentionsSuggestionClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("447"),s=o("FalcoLoggerInternal").create("mentions_suggestion_clicked",e),u=s;l.default=u}),98);
__d("WithTagSuggestionContinueClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3701"),s=o("FalcoLoggerInternal").create("with_tag_suggestion_continue_clicked",e),u=s;l.default=u}),98);
__d("CometMentionsLoggingProvider",["FBLogger","MentionsSessionEndWithoutClickFalcoEvent","MentionsSessionStartFalcoEvent","MentionsSuggestionClickedFalcoEvent","WithTagSuggestionContinueClickedFalcoEvent","guid"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$2=!1,this.$3=null,this.$1=e}var t=e.prototype;return t.getSessionID=function(){return this.$3==null&&r("FBLogger")("search").mustfix("Mentions logging sessionID does not exist."),this.$3},t.isSessionActive=function(){return this.$2},t.startSession=function(t){var e=this;if(t!=null){var n=r("guid")();this.$3=n,this.$2=!0,r("MentionsSessionStartFalcoEvent").log(function(){return babelHelpers.extends({},e.$1,{session_id:n,typed_query:t})})}},t.maybeEndSession=function(t,n,o,a){if(t!=null){var e=n!=null?JSON.stringify(n.map(function(e){return{id:e.key}})):null,i=babelHelpers.extends({},this.$1,{serialized_candidate_suggestions:e,session_id:this.getSessionID(),typed_query:t});if(o!=null){var l,s=o.key,u=(l=n==null?void 0:n.findIndex(function(e){return e.key===s}))!=null?l:null,c=isNaN(parseInt(o.key,10))?"0":o.key;if(a===!0){r("WithTagSuggestionContinueClickedFalcoEvent").log(function(){return babelHelpers.extends({},i,{selected_position:String(u),selected_result_display_text:o.label,selected_result_id:c,selected_result_id_string:o.key})});return}else r("MentionsSuggestionClickedFalcoEvent").log(function(){return babelHelpers.extends({},i,{selected_position:String(u),selected_result_display_text:o.label,selected_result_id:c,selected_result_id_string:o.key})})}else r("MentionsSessionEndWithoutClickFalcoEvent").log(function(){return i});this.$3=null,this.$2=!1}},e})();l.default=e}),98);
__d("useCometMentionsLoggingProvider",["CometMentionsLoggingProvider","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo,u={context_id:null,context_type:"unknown",surface:null,typeahead_type:null};function c(e){return e===void 0&&(e=u),s(function(){return new(r("CometMentionsLoggingProvider"))(e)},[e])}l.default=c}),98);
__d("useCometMentionsResolutionForLexical",["getCometComposerMentionsSearchForLexical","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.startTransition,c=s.useEffect,d=s.useState;function m(e,t){var n=window.getSelection();if(n===null||!n.isCollapsed||e===null)return!1;var r=n.anchorNode,o=e.leadOffset,a=n.anchorOffset;try{t.setStart(r,o),t.setEnd(r,a)}catch(e){return!1}return!0}function p(e,t,n){var o=d(null),a=o[0],i=o[1];return c(function(){var o=document.createRange(),a=null,l=null,s=null,c=function(){var c=o,d=r("getCometComposerMentionsSearchForLexical")(e,n);if(!(d===a||c===null)){a=d;var p=t(d),_=p.dataSource,f=p.searchResult;if(!(_===l&&f===s)){var g=m(f,c);l=_,s=f,u(!g||_===null||f===null?function(){return i(null)}:function(){i({dataSource:_,range:c,searchResult:f})})}}},d=e.registerUpdateListener(c);return c(),function(){o=null,d()}},[n,t,e]),a}l.default=p}),98);
__d("CometMentionsForLexical.react",["CometLexicalContentEditableCommands","CometMentions.react","FBLogger","Lexical","LexicalText","LexicalUtils","emptyFunction","getCometComposerMentionsSearchForLexical","react","useCometMentionsBootstrapForLexical","useCometMentionsLoggingProvider","useCometMentionsResolutionForLexical"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useMemo,p=u.useRef,_=u.useState;function f(e){var t=e.$isValidSelection,n=e.createNodeStrategy,a=e.dataSourceResolverConfig,i=a.bootstrap,l=a.resolver,u=e.editor,m=e.layoutStrategyRenderer,_=e.mentionsHandlerForSelectedEntry,f=e.mentionsLoggerContext,h=e.onMentionsEntrySelected,b=e.position,v=b===void 0?"below":b,S=e.viewStrategyRenderer,R=r("useCometMentionsResolutionForLexical")(u,l,t),L=p(!1),E=g(u),k=E[0],I=E[1],T=p(null),D=C(u);r("useCometMentionsBootstrapForLexical")(u,i),d(function(){return u.registerCommand(o("Lexical").BLUR_COMMAND,function(){return D(),!1},o("Lexical").COMMAND_PRIORITY_LOW)},[u,D]);var x=c(function(){D()},[D]);d(function(){var e,t=[{handler:function(t){return t.hasSelection()?(t.select(),!0):!1},type:(e=o("Lexical")).KEY_ENTER_COMMAND},{handler:function(t){return t.hasSelection()?(t.select(),!0):!1},type:e.KEY_TAB_COMMAND},{handler:function(t){return t.moveUp(),!0},type:e.KEY_ARROW_UP_COMMAND},{handler:function(t){return t.moveDown(),!0},type:e.KEY_ARROW_DOWN_COMMAND},{handler:function(){return D(),I(),!0},type:e.KEY_ESCAPE_COMMAND}];return o("LexicalUtils").mergeRegister.apply(void 0,t.map(function(e){var t=e.handler,n=e.type;return u.registerCommand(n,function(e){var n=T.current,r=L.current;if(n===null||!r||k)return!1;if(t(n)){var o=e;return o.preventDefault(),o.stopPropagation(),!0}return!1},o("Lexical").COMMAND_PRIORITY_CRITICAL)}))},[I,u,D,k]);var $=c(function(e){L.current=e},[]),P=c(function(e){e||D()},[D]),N=c(function(e){var o=r("getCometComposerMentionsSearchForLexical")(u,t);if(o==null){r("FBLogger")("search").warn("Race condition where the user selected a mention but theres no text in the editor");return}var a=l(o),i=a.searchResult;if(i==null){r("FBLogger")("CometComposer").mustfix("onPressEntry was called and no search result was found for the query %s",o);return}D();var s=_==null?void 0:_(e);s!=null&&!s.shouldMentionSelectedEntry||(y(u,n,e,i,t),h==null||h(e),I())},[u,t,l,D,_,n,h,I]),M=r("useCometMentionsLoggingProvider")(f);return R===null||k?(D(),L.current=!1,null):s.jsx(r("CometMentions.react"),{context:R.range,dataSource:R.dataSource,inputElement:u.getRootElement(),layoutStrategyRenderer:m,loggingProvider:M,onAriaChange:D,onBlur:x,onEntriesUpdated:P,onFocus:r("emptyFunction"),onSelectedEntry:N,onVisibilityChange:$,position:v,queryString:R.searchResult.matchingString,ref:T,viewStrategyRenderer:S})}f.displayName=f.name+" [from "+i.id+"]";function g(e){var t=_(!1),n=t[0],r=t[1];return d(function(){if(n){var t=e.getEditorState().read(o("LexicalText").$rootTextContent);return e.registerTextContentListener(function(e){t!==null&&e!==t&&r(!1),t=e})}},[e,n]),m(function(){return[n,function(){return r(!0)}]},[n])}function h(e,t,n){for(var r=n,o=r;o<=t.length;o++)e.substr(-o)===t.substr(0,o)&&(r=o);return r}function y(e,t,n,r,a){e.update(function(){var e=o("Lexical").$getSelection();if(!(!o("Lexical").$isRangeSelection(e)||!e.isCollapsed())){var i=e.anchor;if(i.type==="text"){var l=i.getNode();if(!(a!=null&&!a()||a==null&&!l.isSimpleText())){var s=i.offset,u=l.getTextContent().slice(0,s),c=n.label,d=r.replaceableString.length,m=h(u,c,d),p=s-m;p<0||t({anchorNode:l,endOffset:s,selectedEntry:n,startOffset:p})}}}})}function C(e){var t=p(void 0),n=p(void 0);return c(function(r,a){var i=t.current,l=n.current;(i!==r||l!==a)&&(t.current=r,n.current=a,e.dispatchCommand(o("CometLexicalContentEditableCommands").COMET_LEXICAL_ARIA_COMMAND,{activeDescendantID:r,controlsID:a}))},[e])}l.default=f}),98);
__d("CometMentionsViewListStrategy.react",["CometCompositeStructureContext","FDSText.react","getItemRoleFromCompositeRole","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE","viewItemStrategyRenderer"],s,u=s||(s=o("react")),c=s.useMemo;function d(t){var n=t.ariaProps,o=t.entries,a=t.extraViewProps,i=t.highlightedEntry,l=t.isLoading,s=t.onAbandonTypeahead_DO_NOT_USE,d=t.viewItemStrategyRenderer,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p=n.role,_=c(function(){return p!=null?{role:p}:{}},[p]),f=r("getItemRoleFromCompositeRole")(p);return u.jsx("ul",babelHelpers.extends({},n,{className:"x78zum5 xdt5ytf x1iyjqo2","data-testid":void 0,children:u.jsx(r("CometCompositeStructureContext").Provider,{value:_,children:o.map(function(e,t){if(e.type==="section"){var n=e.entries,a=e.key,l=e.label;return n.length===0?null:u.jsxs("li",{"aria-selected":"false",role:"option",children:[u.jsx("div",{className:"x889kno x2vl965 x1a8lsjc xe2zdcy",children:u.jsx("label",{htmlFor:a,children:u.jsx(r("FDSText.react"),{color:"primary",type:"entityHeaderMeta2",children:l})})}),u.jsx("ul",{id:a,role:"listbox",children:n.map(function(e){return u.createElement(d,babelHelpers.extends({},m,{entry:e,isActive:e.key===(i==null?void 0:i.key),key:e.key,role:f}))})})]},"section-"+a)}else return u.createElement(d,babelHelpers.extends({},m,{entry:e,isActive:e.key===(i==null?void 0:i.key),isFirstItem:t===0,isLastItem:t===o.length-1,key:e.key,role:f}))})})}))}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("cometMessengerFileUploadComposerPluginSupportedTypes",[],(function(t,n,r,o,a,i){"use strict";var e=["photo","video","file"],l=e;i.default=l}),66);
__d("useCometLexicalDragAndDrop",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e,t){var n=t.onDragEnter,r=t.onDragLeave,o=t.onDragOver,a=t.onDrop,i=t.onPaste;s(function(){if(e!=null)return e.registerRootListener(function(e,t){t!=null&&(n&&t.removeEventListener("dragenter",n),r&&t.removeEventListener("dragleave",r),o&&t.removeEventListener("dragover",o),a&&t.removeEventListener("drop",a,!0),i&&t.removeEventListener("paste",i,!0)),e!==null&&(n&&e.addEventListener("dragenter",n),r&&e.addEventListener("dragleave",r),o&&e.addEventListener("dragover",o),a&&e.addEventListener("drop",a,!0),i&&e.addEventListener("paste",i,!0))})},[e,n,r,o,a,i])}l.default=u}),98);
__d("useCometLexicalFileDragAndDrop",["react","useCometLexicalDragAndDrop"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef;function d(e){var t=e.editor,n=e.isMimeTypeAcceptable,o=e.onHover,a=o===void 0?function(){}:o,i=e.onSubmit,l=i===void 0?function(){}:i,s=c(0),d=u(function(e){return Array.from(e).filter(n)},[n]),m=u(function(e){s.current++;var t=e.dataTransfer;if(t==null)return a([],!0);var n=d(t.items);return n.length>0&&e.preventDefault(),a(n,!0)},[d,a]),p=u(function(e){if(s.current--,s.current===0)return a([],!1)},[a]),_=u(function(e){var t=e.dataTransfer;if(t==null)return a([],!0);var n=d(t.items);return n.length>0&&e.preventDefault(),a(n,!0)},[d,a]),f=u(function(e,t){var n=d(t.items),r=n.map(function(e){return e.getAsFile()}).filter(Boolean);return r.length>0?(e.stopPropagation(),e.preventDefault(),l(r)):l([])},[d,l]),g=u(function(e){var t=e.dataTransfer;return s.current=0,a([],!1),t!=null?f(e,t):l([])},[f,a,l]),h=u(function(e){var t=e.clipboardData;if(t==null)return l([]);var n=t.types,r=n.includes("text/plain")&&n.includes("text/html")||n.includes("text/rtf");return r?l([]):f(e,t)},[f,l]);r("useCometLexicalDragAndDrop")(t,{onDragEnter:m,onDragLeave:p,onDragOver:_,onDrop:g,onPaste:h})}l.default=d}),98);
__d("useCometMessengerFileUploadPaste",["react","useCometLexicalFileDragAndDrop"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=e.editor,n=e.handlePastedFiles,o=e.isMimeTypeAcceptable,a=s(function(e){e.length>0&&n(e)},[n]);r("useCometLexicalFileDragAndDrop")({editor:t,isMimeTypeAcceptable:o,onSubmit:a})}l.default=u}),98);
__d("CometMessengerHandlePastedFileComposerPlugin",["cometIsMimeTypeForMedia","cometMessengerFileUploadComposerPluginSupportedTypes","useCometMessengerFileUploadPaste"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e.kind!=="file")return!1;for(var t of r("cometMessengerFileUploadComposerPluginSupportedTypes"))switch(t){case"photo":if(o("cometIsMimeTypeForMedia").isMimeTypeForPhoto(e.type))return!0;break;case"video":if(o("cometIsMimeTypeForMedia").isMimeTypeForVideo(e.type))return!0;break;case"file":if(o("cometIsMimeTypeForMedia").isMimeTypeForFile(e.type))return!0;break;default:}return!1}function s(t){var n=t.editor,o=t.handlePastedFiles;return r("useCometMessengerFileUploadPaste")({editor:n,handlePastedFiles:o,isMimeTypeAcceptable:e}),null}l.default=s}),98);
__d("CometSearchMentionsBaseViewItem.react",["CometTypeaheadViewItem.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["onPressEntryIn","queryString"],s,u=s||(s=o("react"));function c(t){var n=t.onPressEntryIn,o=t.queryString,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=function(t,r){r.preventDefault(),n&&n(t,r)};return u.jsx(r("CometTypeaheadViewItem.react"),babelHelpers.extends({},a,{onPressEntryIn:i}))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("useBaseMentionsLayoutStrategyARIAProps.react",["baseTypeaheadFlattenEntries","react","useCometTypeaheadLayoutContextualStrategyARIAProps"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=e.entries,n=e.highlightedEntry,o=e.onAriaChange,a=r("useCometTypeaheadLayoutContextualStrategyARIAProps")({activeEntries:r("baseTypeaheadFlattenEntries")(t),helperText:"",highlightedEntry:n,inputLabel:"",isOpened:!0,viewRole:"listbox"}),i=a.ariaInputProps,l=a.ariaViewProps;return s(function(){return o(i["aria-activedescendant"],i["aria-controls"])},[i,o]),l}l.default=u}),98);
__d("CometSearchTypeaheadBaseLayoutMentionsStrategy.react",["CometMediaViewerMentionsTypeaheadEmptyState.react","react","useBaseMentionsLayoutStrategyARIAProps.react"],(function(t,n,r,o,a,i,l){"use strict";var e=["isLoading","isLoadingIndicatorEnabled","onAriaChange","viewStrategyRenderer"],s,u=s||(s=o("react"));function c(t){var n=t.isLoading,o=t.isLoadingIndicatorEnabled,a=o===void 0?!1:o,i=t.onAriaChange,l=t.viewStrategyRenderer,s=babelHelpers.objectWithoutPropertiesLoose(t,e),c=r("useBaseMentionsLayoutStrategyARIAProps.react")({entries:s.entries,highlightedEntry:s.highlightedEntry,onAriaChange:i});return u.jsxs("div",{children:[u.jsx(l,babelHelpers.extends({},s,{ariaProps:c,isLoading:a?n:!1})),!n&&s.entries.length===0?u.jsx(r("CometMediaViewerMentionsTypeaheadEmptyState.react"),{}):null]})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("DirectRequestsDeclineButtonConfirmFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3349"),s=o("FalcoLoggerInternal").create("direct_requests_decline_button_confirm",e),u=s;l.default=u}),98);
__d("DirectRequestsThreadAllowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3674"),s=o("FalcoLoggerInternal").create("direct_requests_thread_allow",e),u=s;l.default=u}),98);
__d("DirectRequestsThreadDeclineFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3675"),s=o("FalcoLoggerInternal").create("direct_requests_thread_decline",e),u=s;l.default=u}),98);
__d("DocumentMentionsRegex",[],(function(t,n,r,o,a,i){"use strict";var e="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;",l="\\b[A-Z][^\\s"+e+"]",s={PUNCTUATION:e,NAME:l},u=s;i.default=u}),66);
__d("IGDAudioRecorder.react",["MWPAudioHighlightStylesHooks","MWPAudioPlayerButtons.react","MWPAudioPlayerContainer.react","MWPAudioPlayerHighlight.react","MWPAudioPlayerKeyCommands.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerTimer.react","MWPAudioPlayerUtils","MWPUseVoiceRecorder","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useRef;function d(t){var n=o("react-compiler-runtime").c(50),a=t.voiceRecorder,i=c(void 0),l=a,s=l.audioEl,d=l.state,m=o("MWPAudioPlayerUtils").useResetHighlightProgress(i),p;n[0]!==d?(p=o("MWPUseVoiceRecorder").hasScrubber(d),n[0]=d,n[1]=p):p=n[1];var _=p,f=_?"pointer":"default",g;n[2]!==f?(g={backgroundColor:"var(--chat-composer-button-color)",borderRadius:"18px",cursor:f,height:"36px"},n[2]=f,n[3]=g):g=n[3];var h=o("MWPAudioHighlightStylesHooks").useHighlightStyles(!0),y;n[4]!==g||n[5]!==h?(y={containerStyle:g,highlightStyles:h},n[4]=g,n[5]=h,n[6]=y):y=n[6];var C=y,b;n[7]!==d?(b=o("MWPUseVoiceRecorder").getDuration(d),n[7]=d,n[8]=b):b=n[8];var v;n[9]!==d?(v=o("MWPUseVoiceRecorder").getCurrentTime(d),n[9]=d,n[10]=v):v=n[10];var S;n[11]!==d?(S=o("MWPUseVoiceRecorder").isProgressing(d),n[11]=d,n[12]=S):S=n[12];var R;n[13]!==d?(R=o("MWPUseVoiceRecorder").isCompleted(d),n[13]=d,n[14]=R):R=n[14];var L=o("MWPAudioPlayerUtils").useProgressLiveUpdate(b,s,v,S,!1,R),E=C.containerStyle,k;n[15]!==C.highlightStyles||n[16]!==L?(k=u.jsx(o("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:L,xstyle:C.highlightStyles}),n[15]=C.highlightStyles,n[16]=L,n[17]=k):k=n[17];var I;n[18]!==d?(I=o("MWPUseVoiceRecorder").showScreenReaderLabel(d)&&u.jsx(o("MWPAudioPlayerUtils").ScreenReaderLabel,{currentTime:o("MWPUseVoiceRecorder").getCurrentTime(d)||0,duration:o("MWPUseVoiceRecorder").getDuration(d)}),n[18]=d,n[19]=I):I=n[19];var T;n[20]!==C.highlightStyles?(T=u.jsx(o("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:i,xstyle:C.highlightStyles}),n[20]=C.highlightStyles,n[21]=T):T=n[21];var D;n[22]===Symbol.for("react.memo_cache_sentinel")?(D=(e||(e=r("stylex"))).props(o("MWPAudioPlayerSharedStyles").styles.playbackButtonContainer),n[22]=D):D=n[22];var x=_?m:null,$;n[23]!==d?($=o("MWPUseVoiceRecorder").getPlaybackIcon(d,"var(--chat-composer-button-color)"),n[23]=d,n[24]=$):$=n[24];var P;n[25]!==d?(P=o("MWPUseVoiceRecorder").getPlaybackLabel(d),n[25]=d,n[26]=P):P=n[26];var N;n[27]!==$||n[28]!==P||n[29]!==l.toggle?(N=u.jsx(o("MWPAudioPlayerButtons.react").AudioPlayerPlaybackButton,{icon:$,label:P,onPress:l.toggle}),n[27]=$,n[28]=P,n[29]=l.toggle,n[30]=N):N=n[30];var M;n[31]!==x||n[32]!==N?(M=u.jsx("div",babelHelpers.extends({},D,{onMouseMove:x,children:N})),n[31]=x,n[32]=N,n[33]=M):M=n[33];var w;n[34]!==d?(w=o("MWPUseVoiceRecorder").getTimerTime(d),n[34]=d,n[35]=w):w=n[35];var A;n[36]!==w?(A=u.jsx(r("MWPAudioPlayerTimer.react"),{time:w}),n[36]=w,n[37]=A):A=n[37];var F;n[38]!==s||n[39]!==k||n[40]!==I||n[41]!==T||n[42]!==M||n[43]!==A?(F=u.jsxs(r("MWPAudioPlayerKeyCommands.react"),{audioEl:s,children:[k,I,T,M,A]}),n[38]=s,n[39]=k,n[40]=I,n[41]=T,n[42]=M,n[43]=A,n[44]=F):F=n[44];var O;return n[45]!==C.containerStyle||n[46]!==s||n[47]!==_||n[48]!==F?(O=u.jsx(r("MWPAudioPlayerContainer.react"),{audioEl:s,hasScrubber:_,mediaRenderQpl:null,scrubberRef:i,style:E,testid:void 0,useCase:o("MWPAudioPlayerUtils").UseCase.RECORDER,children:F}),n[45]=C.containerStyle,n[46]=s,n[47]=_,n[48]=F,n[49]=O):O=n[49],O}l.default=d}),98);
__d("IGDMentionsLayoutStrategy.react",["CometContextualLayer.react","CometSearchTypeaheadBaseLayoutMentionsStrategy.react","IGDSPopover.react","IGDThreadListNewMessageLoggingDataContext","MessengerWebUXLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaProps","context","entries","isLoading","onBlur","position","viewRef"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(19),a,i,l,s,c;if(n[0]!==t){var d=t.ariaProps,m=t.context,p=t.entries,_=t.isLoading,f=t.onBlur,g=t.position,h=t.viewRef,y=babelHelpers.objectWithoutPropertiesLoose(t,e);a=d,i=m,l=p,s=g,c=y,n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c}else a=n[1],i=n[2],l=n[3],s=n[4],c=n[5];var C=o("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),b;n[6]!==C?(b={eventName:"mentions_popover_rendered",flowInstanceId:C},n[6]=C,n[7]=b):b=n[7];var v=r("MessengerWebUXLogger").useImpressionLoggerRef(b);if(l.length===0)return null;var S;n[8]!==a||n[9]!==l||n[10]!==c?(S=u.jsx(r("CometSearchTypeaheadBaseLayoutMentionsStrategy.react"),babelHelpers.extends({ariaProps:a,entries:l,isLoading:!1},c)),n[8]=a,n[9]=l,n[10]=c,n[11]=S):S=n[11];var R;n[12]!==v||n[13]!==S?(R=u.jsx(r("IGDSPopover.react"),{popoverContent:S,ref:v}),n[12]=v,n[13]=S,n[14]=R):R=n[14];var L;return n[15]!==i||n[16]!==s||n[17]!==R?(L=u.jsx(r("CometContextualLayer.react"),{align:"start",context_DEPRECATED:i,position:s,children:R}),n[15]=i,n[16]=s,n[17]=R,n[18]=L):L=n[18],L}l.default=c}),98);
__d("cometMentionsDataEntryText",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t;return(t=e.handle)!=null?t:e.label}i.default=e}),66);
__d("MWChatAppendMentionsNodeToReply",["I64","LSContactTypeExact","LSIntEnum","Lexical","LexicalText","MWChatComposerTypeaheadUtil","MWPReplyContext.react","MessengerLexicalActorNode","ReQL","ReQLSuspense","cometMentionsDataEntryText","react","usePrevious","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useContext,p=d.useEffect;function _(e,t){e.update(function(){var n=o("Lexical").$getSelection();if(!(!o("Lexical").$isRangeSelection(n)||!n.isCollapsed())){var a=n.anchor,i=a.getNode(),l=r("cometMentionsDataEntryText")(t),s=o("Lexical").$getRoot().getAllTextNodes().some(function(e){return o("MessengerLexicalActorNode").$isMessengerLexicalActorNode(e)&&e.getTextContent().includes(l)});if(s!==!0){var u=o("MessengerLexicalActorNode").$createMessengerLexicalActorNode({id:t.key,text:l}),c=o("LexicalText").$isRootTextContentEmpty(e.isComposing());c?n.insertNodes([u]):i.insertBefore(u),u.selectNext(0,0)}}})}function f(t,n,a){var l=m(o("MWPReplyContext.react").MWPReplyContext),c=l.reply,d=r("usePrevious")(c),f=(e||(e=r("useReStore")))(),g=o("ReQLSuspense").useFirst(function(){return c!=null?o("ReQL").fromTableAscending(f.tables.messages).getKeyRange(n,c.timestampMs,c.messageId):o("ReQL").empty()},[c,n,f],i.id+":91"),h=o("ReQLSuspense").useFirst(function(){return g!=null?o("ReQL").fromTableAscending(f.tables.contacts).getKeyRange(g.senderId):o("ReQL").empty()},[f,g],i.id+":102"),y=h!=null?(s||(s=o("I64"))).equal(h.contactTypeExact,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").GENERATIVE_AI_BOT)):!1,C=y&&(g==null?void 0:g.botResponseId)!=null;p(function(){var e=d==null&&c!=null;e&&C&&a===!0&&_(t,o("MWChatComposerTypeaheadUtil").aiBotMentionsEntry)},[t,c,d,C,a])}l.insertMentionNodeToFront=_,l.useMWChatAppendMentionsNodeToReply=f}),98);
__d("MWChatComposerMentionsViewItem.react",["CometImageFromIXValue.react","CometSearchMentionsBaseViewItem.react","FDSIcon.react","FDSProfilePhoto.react","FDSTextPairing.react","MWXSvgIcon","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["entry"],s,u=s||(s=o("react"));function c(t){var n=t.entry,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=n.handle,l=n.key,s=n.label,c=n.rawData,d=c.icon,m=c.image,p=c.photoURI,_=c.subtitle,f;return p!=null?f=u.jsx(r("FDSProfilePhoto.react"),{size:28,source:{uri:p}}):d!=null?f=d instanceof o("MWXSvgIcon").MWXSvgIcon?u.jsx(r("FDSIcon.react"),{color:"primary",disabled:!1,icon:d.originalComponent,size:28}):u.jsx(r("FDSIcon.react"),{color:"primary",disabled:!1,icon:d}):m!=null&&(f=u.jsx(r("CometImageFromIXValue.react"),{source:m})),u.jsx(r("CometSearchMentionsBaseViewItem.react"),babelHelpers.extends({},a,{entry:n,itemStartContent:f,testid:void 0,children:u.jsx(r("FDSTextPairing.react"),{body:s,bodyLineLimit:1,level:3,meta:_,metaLineLimit:1})}))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("cometBaseMentionsLexicalCreateNodeStrategy",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(t){var n=t.anchorNode,o=t.endOffset,a=t.selectedEntry,i=t.startOffset,l;if(i===0){var s=n.splitText(o);l=s[0]}else{var u=n.splitText(i,o);l=u[1]}if(l==null){r("FBLogger")("search").mustfix("createMentionNodeFromSearchResult failed to find correct offsets. Found offsets: "+i+", "+o+".");return}var c=e(a);c.setStyle(l.getStyle()),l.replace(c),c.selectNext(0,0)}}l.default=e}),98);
__d("messengerMentionsLexicalCreateNodeStrategy",["MessengerLexicalActorNode","cometBaseMentionsLexicalCreateNodeStrategy","cometMentionsDataEntryText"],(function(t,n,r,o,a,i,l){"use strict";var e=r("cometBaseMentionsLexicalCreateNodeStrategy")(function(e){return o("MessengerLexicalActorNode").$createMessengerLexicalActorNode({id:e.key,text:r("cometMentionsDataEntryText")(e)})}),s=e;l.default=s}),98);
__d("useCometMentionsViewListStrategy",["CometMentionsViewListStrategy.react","CometTypeaheadProgressGlimmer.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["isLoading"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){var n=t.viewItemStrategyRenderer;return c(function(t){var o=t.isLoading,a=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.jsxs(u.Fragment,{children:[u.jsx(r("CometMentionsViewListStrategy.react"),babelHelpers.extends({},a,{isLoading:!1,viewItemStrategyRenderer:n})),o&&u.jsx(r("CometTypeaheadProgressGlimmer.react"),{})]})},[n])}l.default=d}),98);
__d("MWChatComposerMentionsTypeaheadDataSource",["CurrentUser","MWChatComposerTypeaheadUtil","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=6,u=(function(){function t(e,t,n,o,a,i){this.$1=[],this.$1=Array.from(e.values()).filter(function(e){return e.contactId!==r("CurrentUser").getID()}),this.$2=t,this.$3=n!=null?n:null,this.$4=o,this.$5=a,this.$6=i}var a=t.prototype;return a.bootstrap=function(){},a.fetchCache=function(t){return o("MWChatComposerTypeaheadUtil").fetchCacheComposerMentionsTypeahead(t,this.$1,this.$2,this.$3,this.$4,this.$5,s,this.$6)},a.fetchNetwork=function(r){return(e||(e=n("Promise"))).resolve(this.fetchCache(r))},t})();l.default=u}),98);
__d("createCometMentionMatchStrategy",["DocumentMentionsRegex"],(function(t,n,r,o,a,i,l){"use strict";var e="(?:\\.[ |$]| |["+r("DocumentMentionsRegex").PUNCTUATION+"]|)",s=75;function u(e,t,n){var r="[^"+e+t+"\\s]",o=new RegExp("(^|\\s|\\()(["+e+"]((?:"+r+n+"){0,"+s+"}))$"),a=50,i=new RegExp("(^|\\s|\\()(["+e+"]((?:"+r+"){0,"+a+"}))$");return{regex:o,regexAlias:i}}function c(t){var n=t.minMatchLength,o=t.name,a=t.triggers,i=t.disallowedChars,l=i===void 0?r("DocumentMentionsRegex").PUNCTUATION:i,s=t.disallowedTerms,c=t.validJoins,d=c===void 0?e:c,m=u(a,l,d),p=m.regex,_=m.regexAlias;return{findMentionableString:function(t){var e=p.exec(t);if(e===null&&(e=_.exec(t)),e!==null){var r=e[1],o=e[3];if(s!=null&&s.includes(o.toLowerCase()))return null;if(o.length>=n)return{leadOffset:e.index+r.length,matchingString:o,replaceableString:e[2]}}return null},name:o}}l.default=c}),98);
__d("createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport",["createCometMentionMatchStrategy"],(function(t,n,r,o,a,i,l){"use strict";var e=["@","\\uff20"].join(""),s=",\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>:;",u="(?:\\.[ |$]|[ ]['\"]|['\"][ |$]| |["+s+"]|)";function c(t){var n=t.disallowedTerms,o=t.minMatchLength;return r("createCometMentionMatchStrategy")({disallowedChars:s,disallowedTerms:n,minMatchLength:o,name:"CometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport("+o.toString()+")",triggers:e,validJoins:u})}l.default=c}),98);
__d("useCometMentionsDataSourceResolverConfig",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useLayoutEffect,d=s.useMemo;function m(e,t){var n=u(function(){e.forEach(function(e){var t=e.dataSource;t.bootstrap()})},[e]);return c(function(){t&&n()},[t,n]),d(function(){var t=new Map;return{bootstrap:n,resolver:function(r){var n={dataSource:null,searchResult:null};if(r==null)return n;var o=t.get(r);if(o!=null)return o;for(var a=0;a<e.length;a++){var i=e[a],l=i.dataSource,s=i.matchStrategy,u=s.findMentionableString(r);if(u!=null){var c={dataSource:l,searchResult:u};return t.set(r,c),c}}return t.set(r,n),n}}},[e,n])}l.default=m}),98);
__d("useMWChatMentionsDataSourceResolverConfig",["I64","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWChatComposerMentionsTypeaheadDataSource","MWLSThread","createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport","react","useCometMentionsDataSourceResolverConfig"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useMemo;function c(e){var t=e.isAiBotMentionsEnabled,n=e.participants,a=e.threadFBID,i=e.triggerParticipantsSearch,l=o("MWLSThread").useThreadExn((s||(s=o("I64"))).of_string(a)),c=l.threadType,d=o("LSMessagingThreadTypeUtil").isGroup(l.threadType)&&o("LSThreadBitOffset").has(43,l),m=u(function(){return[{dataSource:new(r("MWChatComposerMentionsTypeaheadDataSource"))(n,a,i,t,d,c),matchStrategy:r("createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport")({minMatchLength:0})}]},[d,t,n,a,i,c]);return r("useCometMentionsDataSourceResolverConfig")(m,!0)}l.default=c}),98);
__d("MWWorkForeignEntityTypeUtils",["I64","LSContactWorkForeignEntityType","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactWorkForeignEntityType").NOT_FOREIGN))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN))?"NOT_FOREIGN":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactWorkForeignEntityType").NOT_FOREIGN_LIMITED))?"LIMITED":"FOREIGN"}l.getWorkForeignEntityType=u}),98);
__d("useParticipantsExcludingViewer",["I64","MAWSubscribeToContactNames","MWLSContactTypeExactUtils","MWPActor.react","MWWorkForeignEntityTypeUtils","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useMemo;function d(t){var n=t.threadKey,a=o("MWPActor.react").useActor(),l=(e||(e=r("useReStore")))(),u=o("ReQLSuspense").useArray(function(){return o("ReQL").fromTableAscending(l.tables.participants).getKeyRange(n).map(function(e){return[o("ReQLSuspense").first(o("ReQL").fromTableAscending(l.tables.contacts).getKeyRange(e.contactId),i.id+":43"),e]})},[l,n],i.id+":37"),d=c(function(){return u.reduce(function(e,t){var n=t[0],r=t[1];if(n!=null&&!(s||(s=o("I64"))).equal(n.id,a)){var i;return e.concat([[babelHelpers.extends({},n,{name:(i=n.name)!=null?i:o("MAWSubscribeToContactNames").getUnknownUser()}),r]])}return e},[])},[u,a]);return c(function(){return new Map(d.map(function(e){var t,n=e[1],a=e[0];return[(s||(s=o("I64"))).to_string(a.id),{actualName:a.name,blockedByViewerStatus:a.blockedByViewerStatus,contactId:s.to_string(a.id),isAdmin:(t=n.isAdmin)!=null?t:!1,isContact:!0,jobTitle:a.workJobTitle,name:a.name,nickname:n.nickname,profilePictureUrl:r("getLSMediaContactProfilePictureUrl")(a),secondaryName:o("MWLSContactTypeExactUtils").isIgContact(a.contactTypeExact)?a.secondaryName:void 0,workForeignEntityInfo:o("MWWorkForeignEntityTypeUtils").getWorkForeignEntityType(a.workForeignEntityType)}]}))},[d])}l.default=d}),98);
__d("IGDMentionsPluginForLexical.react",["CometMentionsForLexical.react","I64","IGDMentionsLayoutStrategy.react","IGDThreadListNewMessageLoggingDataContext","Lexical","MWChatAppendMentionsNodeToReply","MWChatComposerMentionsViewItem.react","MessengerWebUXLogger","messengerMentionsLexicalCreateNodeStrategy","react","react-compiler-runtime","useCometMentionsViewListStrategy","useMWChatMentionsDataSourceResolverConfig","useParticipantsExcludingViewer"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useMemo,p={root:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",marginTop:"xdj266r",marginBottom:"xat24cr",minWidth:"x1jzhcrs",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0}};function _(e){var t=o("react-compiler-runtime").c(18),n=e.editor,a=e.isAiBotMentionsEnabled,i=e.threadKey,l;t[0]!==i?(l={threadKey:i},t[0]=i,t[1]=l):l=t[1];var c=r("useParticipantsExcludingViewer")(l),d;t[2]!==i?(d=(s||(s=o("I64"))).to_string(i),t[2]=i,t[3]=d):d=t[3];var m=d,p;t[4]!==a||t[5]!==c||t[6]!==m?(p={isAiBotMentionsEnabled:a,participants:c,threadFBID:m},t[4]=a,t[5]=c,t[6]=m,t[7]=p):p=t[7];var _=p,h=r("useMWChatMentionsDataSourceResolverConfig")(_),y;t[8]===Symbol.for("react.memo_cache_sentinel")?(y={viewItemStrategyRenderer:g},t[8]=y):y=t[8];var C=r("useCometMentionsViewListStrategy")(y);o("MWChatAppendMentionsNodeToReply").useMWChatAppendMentionsNodeToReply(n,i,a);var b=r("MessengerWebUXLogger").useInteractionLogger(),v=o("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),S;t[9]!==n||t[10]!==v||t[11]!==b?(S=function(){b==null||b({eventName:"mentions_recipient_selected",flowInstanceId:v}),n.update(f)},t[9]=n,t[10]=v,t[11]=b,t[12]=S):S=t[12];var R=S,L;return t[13]!==h||t[14]!==n||t[15]!==R||t[16]!==C?(L=u.jsx(r("CometMentionsForLexical.react"),{createNodeStrategy:r("messengerMentionsLexicalCreateNodeStrategy"),dataSourceResolverConfig:h,editor:n,layoutStrategyRenderer:r("IGDMentionsLayoutStrategy.react"),onMentionsEntrySelected:R,position:"above",viewStrategyRenderer:C}),t[13]=h,t[14]=n,t[15]=R,t[16]=C,t[17]=L):L=t[17],L}function f(){var e=o("Lexical").$getSelection();o("Lexical").$isRangeSelection(e)&&e.insertText(" ")}function g(e){return u.jsx(r("MWChatComposerMentionsViewItem.react"),babelHelpers.extends({},e,{xstyle:p.root}))}g.displayName=g.name+" [from "+i.id+"]",l.default=_}),98);
__d("MAWUIPersistedDataServiceRegistry",["MAWUIMessageComposerDraftsPersistedDataService"],(function(t,n,r,o,a,i,l){"use strict";var e={messageComposerDrafts:o("MAWUIMessageComposerDraftsPersistedDataService").getMAWUIMessageComposerDraftsPersistedDataService()};function s(){return e}l.getUIPersistedDataServiceRegistry=s}),98);
__d("MAWUIPersistedDataServices",["BroadcastChannelFallback","FBLogger","MAWBridgeFireAndForget","MAWCacheServiceDB","MAWCacheServiceUtils","MAWUICacheServicesBase","MAWUIPersistedDataServiceRegistry","MAWWorkerPersistedDataService","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new(o("MAWUICacheServicesBase")).MAWUICacheServicesBase(o("MAWUIPersistedDataServiceRegistry").getUIPersistedDataServiceRegistry()),this.$2=o("MAWWorkerPersistedDataService").getMAWPersistedDataServiceBroadcastChannel(),this.$3()}var t=e.prototype;return t.$3=function(){var e=this,t=function(n){var t,o,a,i,l,s;if(typeof n=="object"&&n!=null&&typeof n.data=="object"&&n.data!==null&&typeof((t=n.data)==null?void 0:t.namespace)=="string"&&((o=n.data)==null?void 0:o.namespace)!==null&&typeof((a=n.data)==null?void 0:a.source)=="string"&&((i=n.data)==null?void 0:i.source)!==null&&typeof((l=n.data)==null?void 0:l.cache)=="object"&&((s=n.data)==null?void 0:s.cache)!==null&&Array.isArray(n.data.cache)){var u,c=n.data.namespace,d=n.data.cache,m=n.data.source,p;if(((u=n.data)==null?void 0:u.instanceKey)!=null){var _;typeof((_=n.data)==null?void 0:_.instanceKey)=="number"?p=n.data.instanceKey:r("FBLogger")("MAWUIPersistedDataServices").info("Invalid instance key received via broadcast channel.")}m==="ui-manual-write"&&e.$1.updateInMemoryCacheAndTriggerCallback(c,d,m,p)}else throw r("FBLogger")("messenger_web").mustfixThrow("Invalid payload received via broadcast channel.")};this.$2==null?o("BroadcastChannelFallback").registerBroadcastChannelFallbackListener(o("MAWWorkerPersistedDataService").MAW_PERSISTED_DATA_SERVICE_BROADCAST_CHANNEL,t):this.$2.onmessage=t},t.sendUpdateFor=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n="ui-manual-write",a=t.map(function(e){return e.key}),i=t.map(function(e){return[e.key,e]}),l=o("MAWCacheServiceUtils").findDuplicates(i,function(e){var t=e[0],n=e[1];return t});if(l.length>0&&r("FBLogger")("MAWPersistedDataService").mustfix("Found duplicate keys in cache: %s. Original keys: %s, Namespace: %s",l.map(function(e){var t=e[0],n=e[1];return t}).join(", "),a.join(", "),e),i.length!==0){try{var s=o("MAWCacheServiceDB").convertCacheValueToDBRawValue(i).map(function(e){return babelHelpers.extends({},e,{key:o("MAWUICacheServicesBase").adjustCacheKey(e.key)})}),u=yield o("MAWCacheServiceDB").getOrSetupMAWCacheDB();yield u.runInTransaction([e],"readwrite",function(t){var n=s.map(function(e){return{item:e,selector:[e.key]}});return t.stores[e].bulkUpsert("key",n)},"update_cache_"+e)}catch(e){r("FBLogger")("MAWUIPersistedDataServices").catching(r("getErrorSafe")(e)).mustfix("Failed to update persisted cache")}this.$1.updateInMemoryCacheAndTriggerCallback(e,i,n),o("MAWBridgeFireAndForget").fireAndForget("backend","sendUpdateFromUIPersistedDataService",{cache:i,namespace:e,source:n})}});function t(t,n){return e.apply(this,arguments)}return t})(),t.resetInMemoryCache=function(t,n){this.$1.resetInMemoryCache(t,n)},t.checkExistingCacheAndNotifyListenersFor=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=Array.from(new Set(t)),o=this.$1.checkInMemoryCacheAndTriggerCallback(e,n);if(o.length===0){r("FBLogger")("MAWUICacheServices").info("All keys are in memory cache. Namespace: %s",e);return}var a=yield this.$1.checkPersistedCacheAndTriggerCallback(e,o).catch(function(t){return r("FBLogger")("MAWUIPersistedDataServices").catching(r("getErrorSafe")(t)).mustfix("Failed to read from persisted cache in UI.",e),o});if(a.length===0){r("FBLogger")("MAWUIPersistedDataServices").info("All keys are in persisted cache. Namespace: %s",e);return}});function t(t,n){return e.apply(this,arguments)}return t})(),e})(),s=null,u=function(){return s==null&&(s=new e),s};l.getMAWUIPersistedDataServices=u}),98);
__d("MessageRequestsBulkActionConfirmedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("256"),s=o("FalcoLoggerInternal").create("message_requests_bulk_action_confirmed",e),u=s;l.default=u}),98);
__d("MessageRequestsBulkActionEditFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2614"),s=o("FalcoLoggerInternal").create("message_requests_bulk_action_edit",e),u=s;l.default=u}),98);
__d("MessageRequestsBulkActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("257"),s=o("FalcoLoggerInternal").create("message_requests_bulk_action_tapped",e),u=s;l.default=u}),98);
__d("MessageRequestsInfoBannerShownFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("258"),s=o("FalcoLoggerInternal").create("message_requests_info_banner_shown",e),u=s;l.default=u}),98);
__d("MessageRequestsThreadActionConfirmedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("259"),s=o("FalcoLoggerInternal").create("message_requests_thread_action_confirmed",e),u=s;l.default=u}),98);
__d("MessageRequestsThreadActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("260"),s=o("FalcoLoggerInternal").create("message_requests_thread_action_tapped",e),u=s;l.default=u}),98);
__d("MessageRequestsThreadDenialOptionsTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("261"),s=o("FalcoLoggerInternal").create("message_requests_thread_denial_options_tapped",e),u=s;l.default=u}),98);
__d("MessageRequestsViewThreadlistFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("263"),s=o("FalcoLoggerInternal").create("message_requests_view_threadlist",e),u=s;l.default=u}),98);
__d("VideoPlayerCastControlIcon.react",["fbt","ix","CastingControllerHooks","CometRelay","CometWatchAndScrollVideoContext","FBLogger","JSResourceForInteraction","VideoPlayerControlIcon.react","VideoPlayerHooks","emptyFunction","fbicon","react","useCometLazyDialog"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e,p=m.useCallback,_=m.useContext,f=r("JSResourceForInteraction")("CometCastingStopWatchAndScrollDialog.react").__setRef("VideoPlayerCastControlIcon.react");function g(e){var t,n=e.subOrigin;o("CastingControllerHooks").useCastingInitializeIfNecessary();var a=(t=(c||(c=o("VideoPlayerHooks"))).useVideoFbid())!=null?t:"",i=(c||(c=o("VideoPlayerHooks"))).useController(),l=o("CometRelay").useRelayEnvironment(),m=o("CastingControllerHooks").useCastingController(),g=_(r("CometWatchAndScrollVideoContext")),h=r("useCometLazyDialog")(f),y=h[0],C=g==null?void 0:g.videoID,b=p(function(){if(a!=null){var e=i.getPlayheadPosition();m.startPlayVideoNow({environment:l,origin:"video_home",position:e,subOrigin:n,videoID:a})}else r("FBLogger")("comet_video_player").mustfix("Could not transition to Cast player because videoID was null")},[m,l,n,i,a]),v=p(function(){C!=null?y({onClose:r("emptyFunction"),onContinue:b,startingVideoType:"cast"},r("emptyFunction")):b()},[y,b,C]),S=s._(/*BTDS*/"TV\ub85c \ub3d9\uc601\uc0c1 \ubbf8\ub7ec\ub9c1");return d.jsx(r("VideoPlayerControlIcon.react"),{color:"white",icon:o("fbicon")._(u("788899"),20),label:S,onPress:v,tooltip:S})}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),226);
__d("VideoPlayerCastControl.react",["CastingControllerHooks","VideoPlayerCastControlIcon.react","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.subOrigin,n=o("CastingControllerHooks").useIsCastAvailable()&&!r("gkx")("20113");return n?s.jsx(r("VideoPlayerCastControlIcon.react"),{subOrigin:t}):null}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("VideoPlayerSettingsMenuAudioTrackPaneToggle.react",["ix","CometImage.react","CometPressable.react","CometVideoPlayerAutoDubbingWWWStrings","CurrentLocale","VideoPlayerAudioTrackUtils","VideoPlayerSettingsMenu.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={pressableOption:{width:"xh8yej3",$$css:!0}};function d(e){var t=e.setPane,n=e.targetAudioTrack,a=o("VideoPlayerAudioTrackUtils").getIntlDisplayName(r("CurrentLocale").get(),n==null?void 0:n.lang);return u.jsxs(r("CometPressable.react"),{onPress:function(){t(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.AUDIO)},testid:void 0,xstyle:c.pressableOption,children:[u.jsx("div",{className:"x1ypdohk x1s688f",children:o("CometVideoPlayerAutoDubbingWWWStrings").VOD_TRANSLATIONS_MENU_ITEM}),u.jsxs("div",{className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x13fj5qh x450l9j xn80e1m",children:[u.jsx("span",{"data-testid":void 0,children:(n==null?void 0:n.role)===null?o("CometVideoPlayerAutoDubbingWWWStrings").VOD_TRANSLATIONS_OFF:(n==null?void 0:n.role)==="dub"&&a!=null?o("CometVideoPlayerAutoDubbingWWWStrings").getLanguageLabel(a):null}),u.jsx("span",{className:"x3nfvp2 xmgb6t1 xwklpps",children:u.jsx(r("CometImage.react"),{src:s("480587")})})]})]})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);